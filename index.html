
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ABTastySDK documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;objective_c&quot;,&quot;swift&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="objective_c">objective_c</a>
              <a href="#" data-language-name="swift">swift</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#welcome" class="toc-h1 toc-link" data-title="welcome">Welcome</a>
          </li>
          <li>
            <a href="#app-prerequisites" class="toc-h1 toc-link" data-title="app-prerequisites">App prerequisites</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="getting-started">Getting started</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#cocoapods" class="toc-h2 toc-link" data-title="cocoapods">Cocoapods</a>
                  </li>
                  <li>
                    <a href="#manual-installation" class="toc-h2 toc-link" data-title="manual-installation">Manual Installation</a>
                  </li>
                  <li>
                    <a href="#apple-store-submission" class="toc-h2 toc-link" data-title="apple-store-submission">Apple Store Submission</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#starting-campaigns" class="toc-h1 toc-link" data-title="starting-campaigns">Starting campaigns</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sdk-initialization" class="toc-h2 toc-link" data-title="sdk-initialization">SDK Initialization</a>
                  </li>
                  <li>
                    <a href="#getting-variations" class="toc-h2 toc-link" data-title="getting-variations">Getting variations</a>
                  </li>
                  <li>
                    <a href="#activate-campaign" class="toc-h2 toc-link" data-title="activate-campaign">Activate Campaign</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sending-events" class="toc-h1 toc-link" data-title="sending-events">Sending events</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#abtracking" class="toc-h2 toc-link" data-title="abtracking">ABTracking</a>
                  </li>
                  <li>
                    <a href="#action-tracking" class="toc-h2 toc-link" data-title="action-tracking">Action Tracking</a>
                  </li>
                  <li>
                    <a href="#custom-tracking" class="toc-h2 toc-link" data-title="custom-tracking">Custom Tracking</a>
                  </li>
                  <li>
                    <a href="#transaction-tracking" class="toc-h2 toc-link" data-title="transaction-tracking">Transaction tracking</a>
                  </li>
                  <li>
                    <a href="#visit-tracking" class="toc-h2 toc-link" data-title="visit-tracking">Visit tracking</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#reference" class="toc-h1 toc-link" data-title="reference">Reference</a>
          </li>
          <li>
            <a href="#releases" class="toc-h1 toc-link" data-title="releases">Releases</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#b0-1-0" class="toc-h2 toc-link" data-title="b0-1-0">b0.1.0</a>
                  </li>
              </ul>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='welcome'>Welcome</h1>
<p>Welcome to the AB Tasty server side <strong>ABTastySdk</strong> (<em>beta</em>) documentation!</p>

<p>The ABTastySDK project is an iOS framework that helps you create server side tests on your native iOS app.</p>

<p>You can use this frameWork to access AB Tasty endpoints, which can generate a unique visitor ID, allocate a visitor to a test, and push visits and conversions events in order to help you analyze the outcomes of your campaigns.</p>

<p>Should you have any question about this documentation, feel free to <a href="mailto:contact@abtastycom">reach out to us</a>.</p>
<h1 id='app-prerequisites'>App prerequisites</h1>
<ul>
<li><p>Your app must be a native app written in Swift or Objective C.</p></li>
<li><p>ABTastySdk supports at least ios 8.0+</p></li>
</ul>
<h1 id='getting-started'>Getting started</h1>
<p>ABtastySDK is available for distribution through Pods or manual installation.</p>
<h3 id='cocoapods'>Cocoapods</h3>
<blockquote>
<p>Make sure  <code>use_frameworks!</code>  is also included in the Podfile</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="n">target</span> <span class="s1">'Your App'</span> <span class="k">do</span>
    <span class="n">use_frameworks!</span>
    <span class="n">pod</span> <span class="s1">'ABTastySdk'</span><span class="p">,</span> <span class="ss">:http</span> <span class="o">=&gt;</span> <span class="s1">'https://sdk.abtasty.com/ios/ABTastySdk.zip'</span>
  <span class="k">end</span>
</code></pre>
<blockquote>
<p>Run pod isntall from your Xcode project&#39;s base directory</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>pod install

</code></pre>
<ol>
<li><p><a href='https://guides.cocoapods.org/'>Install CocoaPods.</a></p></li>
<li><p>Open Terminal and navigate to the directory that contains your project then enter the following command: <code>pod init</code></p></li>
<li><p>Open your Podfile and add the following line to the Podfile </p></li>
<li><p>Run <code>pod install</code> from your Xcode project&#39;s base directory</p></li>
<li><p>Make sure you always open the Xcode workspace and not the project file when building your project</p></li>
</ol>
<h3 id='manual-installation'>Manual Installation</h3>
<ol>
<li><p>Download the frameWork  <a href='http://sdk.abtasty.com/ios/ABTastySdk.zip'>ABTastySdk.framework.</a></p></li>
<li><p>In Finder, navigate to the ABTastySdk.framework file and move it under your &quot;Embedded Binaries&quot; section in Xcode</p></li>
<li><p>When moving it, a popup is displayed, in which you must check &quot;Copy items if needed&quot;.</p></li>
</ol>
<h3 id='apple-store-submission'>Apple Store Submission</h3><pre class="highlight shell tab-shell"><code><span class="nv">FRAMEWORK</span><span class="o">=</span><span class="s2">"ABTastySdk"</span>
<span class="nv">FRAMEWORK_EXECUTABLE_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">BUILT_PRODUCTS_DIR</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">FRAMEWORKS_FOLDER_PATH</span><span class="k">}</span><span class="s2">/</span><span class="nv">$FRAMEWORK</span><span class="s2">.framework/</span><span class="nv">$FRAMEWORK</span><span class="s2">"</span>
<span class="nv">EXTRACTED_ARCHS</span><span class="o">=()</span>
<span class="k">for </span>ARCH <span class="k">in</span> <span class="nv">$ARCHS</span>
<span class="k">do
</span>lipo -extract <span class="s2">"</span><span class="nv">$ARCH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">"</span> -o <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">-</span><span class="nv">$ARCH</span><span class="s2">"</span>
EXTRACTED_ARCHS+<span class="o">=(</span><span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">-</span><span class="nv">$ARCH</span><span class="s2">"</span><span class="o">)</span>
<span class="k">done
</span>lipo -o <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">-merged"</span> -create <span class="s2">"</span><span class="k">${</span><span class="nv">EXTRACTED_ARCHS</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span>
rm <span class="s2">"</span><span class="k">${</span><span class="nv">EXTRACTED_ARCHS</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span>
rm <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">"</span>
mv <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">-merged"</span> <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">"</span>
</code></pre>
<aside class="notice">
<b>ABTastySdk FrameWork is universal and BitCode supported</b> <br>
The universal framework for iOS contains architectures for simulators and devices. You will then be able to run your application on all devices and all iOS simulators.
</aside>

<p>If your app contains a universal framework, the App store will reject your app because of an unwanted architecture.
You need to add a new build phase, then select <code>Run Script</code> to add a new build step after <code>Embed frameworks</code>.
In the <code>Shell</code> field, enter the following script:</p>

<p><img src="images/rScript.png" alt="alt text" /></p>
<h1 id='starting-campaigns'>Starting campaigns</h1>
<p>This section of the documentation aims at helping you starting a new campaign in your app with the ABTasty Ios SDK.</p>
<h2 id='sdk-initialization'>SDK Initialization</h2><h3 id='initialize-abtastysdk'>Initialize ABTastySDK</h3>
<blockquote>
<p>import ABTastySdk frameWork and Add the following code into your AppDelegate.m file</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>

    <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">startABTastySdk</span><span class="p">:</span><span class="s">@"YOUR_ACCESS_KEY"</span><span class="p">];</span>

    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight swift tab-swift"><code><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplicationLaunchOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>

    <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">startSdk</span><span class="p">(</span><span class="s">"YOUR_ACCESS_KEY"</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Initialize ABTastySDK with completion Block</p>
</blockquote>
<pre class="highlight swift tab-swift"><code><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplicationLaunchOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>

    <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">startSdk</span><span class="p">(</span><span class="s">"YOUR_ACCESS_KEY"</span><span class="p">)</span> <span class="p">{</span>

        <span class="nf">print</span><span class="p">(</span><span class="s">"SDK is Ready"</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre><pre class="highlight objective_c tab-objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>

    <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">startABTastySdk</span><span class="p">:</span><span class="s">@"YOUR_ACCESS_KEY"</span> <span class="nf">WithCompletionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>

        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"SDK is Ready"</span><span class="p">);</span>
    <span class="p">}];</span>

    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>To run experiments with ABTasty you&#39;ll need to initialize ABTasty with the AB_TASTY_KEY parameter. ABTasty instance can both activate experiments and track events.</p>

<p>To do so, just call the <code>startABTastySdk</code> function in the ABTasty class located in the frameWork ABTastySdk.framework. For each new user, at the very first initialization, the SDK requests a new visitor id to our servers and save it in <code>UserDefaults</code>, and for each initialization the SDK will allocates variations for all camapigns.</p>

<p><code>(void)startABTastySdk:(NSString*)appId</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>appId</td>
<td>NSString</td>
<td>Access key provided by AB Tasty</td>
</tr>
</tbody></table>

<p>As the sdk is asynchronous and run in parallel, this method <code>startABTastySdk:WithCompletionBlock:</code> lets you set a block which is going to be executed when the SDK is ready.</p>

<p><code>- (void)startABTastySdk:(NSString*)appId WithCompletionBlock:(void (^)(void))pBlock</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>appId</td>
<td>NSString</td>
<td>Access key provided by AB Tasty</td>
</tr>
<tr>
<td>pBlock</td>
<td>block</td>
<td>The block to be invoked</td>
</tr>
</tbody></table>

<aside class="notice">
Replace <code>AB_TASTY_KEY</code> with the key provided by AB Tasty.
</aside>

<p><br><br></p>
<h3 id='initialize-with-tracking-data'>Initialize with Tracking data</h3>
<blockquote>
<p>Initialize with Tracking data</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code> <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">startABTastySdk</span><span class="p">:</span><span class="s">@"YOUR_ACCESS_KEY"</span> <span class="nf">WithTrackingInfos</span><span class="p">:</span>
    <span class="s">@"Longitude"</span><span class="o">:</span><span class="mf">@2.3333</span><span class="p">,</span>
    <span class="s">@"Latitude"</span><span class="o">:</span> <span class="mf">@48.48</span><span class="p">,</span>
    <span class="s">@"ipAddress"</span><span class="o">:</span><span class="s">@"xxx.xxx.xxx.xxx"</span>
    <span class="p">}];</span>
</code></pre><pre class="highlight swift tab-swift"><code>     <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">startSdk</span><span class="p">(</span><span class="s">"YOUR_ACCESS_KEY"</span><span class="p">,</span> <span class="nv">withTrackingInfos</span><span class="p">:</span>
         <span class="p">[</span><span class="s">"Longitude"</span><span class="p">:</span><span class="mf">2.3333</span><span class="p">,</span> <span class="s">"Latitude"</span><span class="p">:</span><span class="mf">48.48</span><span class="p">,,</span><span class="s">"ipAddress"</span><span class="p">:</span><span class="s">"xxx.xxx.xxx.xxx"</span><span class="p">])</span>
</code></pre>
<p><code>- (void)startABTastySdk:(NSString*)appId WithTrackingInfos:(NSDictionary*)pInfosTracking</code></p>

<p>This method lets you to set common default tracking data to be shared between all your events.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>appId</td>
<td>NSString</td>
<td>Access key provided by AB Tasty</td>
</tr>
<tr>
<td>pInfosTracking</td>
<td>NSDictionary</td>
<td>tracking information of common default data</td>
</tr>
</tbody></table>
<h3 id='common-tracking-information'>Common Tracking Information</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Longitude</td>
<td>Double</td>
<td>Longitude</td>
</tr>
<tr>
<td>Latitude</td>
<td>Double</td>
<td>Latitude</td>
</tr>
<tr>
<td>ipAddress</td>
<td>NSDictionary</td>
<td>ip adress</td>
</tr>
</tbody></table>

<blockquote>
<p>You can update all parameters or one of them</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code>
<span class="c1">// Update all common tracking data
</span><span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">updateConfigInfosTracking</span><span class="p">:@{</span><span class="s">@"Longitude"</span><span class="o">:</span><span class="mf">@2.352222</span><span class="p">,</span>
 <span class="s">@"Latitude"</span><span class="o">:</span> <span class="mf">@48.856614</span><span class="p">,</span>
<span class="s">@"ipAddress"</span><span class="o">:</span><span class="s">@"xxx.xxx.xxx.xxx"</span><span class="p">}];</span>

<span class="c1">// Update one of the common tracking data - ipAdress
</span><span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">updateConfigInfosTracking</span><span class="p">:@{</span><span class="s">@"ipAddress"</span><span class="o">:</span><span class="s">@"xxx.xxx.xxx.xxx"</span><span class="p">}];</span>

</code></pre><pre class="highlight swift tab-swift"><code>
<span class="c1">// Update all common tracking information data</span>
<span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">startSdk</span><span class="p">(</span><span class="s">"AIzaSyBOtlLZ1TPTmS1HJYvL1xVuiB5GndXD4P8"</span><span class="p">,</span> <span class="nv">withTrackingInfos</span><span class="p">:</span>
<span class="p">[</span><span class="s">"Longitude"</span><span class="p">:</span><span class="mf">2.33</span><span class="p">,</span> <span class="s">"Latitude"</span><span class="p">:</span><span class="mf">48.48</span><span class="p">,</span><span class="s">"ipAddress"</span><span class="p">:</span><span class="s">"xxx.xxx.xxx.xxx"</span><span class="p">])</span>

<span class="c1">// Update one of the common tracking information data - ipAdress</span>
<span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">updateConfigInfosTracking</span><span class="p">([</span><span class="s">"ipAddress"</span><span class="p">:</span><span class="s">"xxx.xxx.xxx.xxx"</span><span class="p">])</span>

</code></pre>
<p>You can update those tracking information by calling : <code>-(void)updateConfigInfosTracking:(NSDictionary*)pInfoTracking</code></p>

<p><br>
<aside class="notice">
By default the SDK sends all the events with <b>common tracking information</b> set when starting the SDK.
</aside></p>

<p><br>
<aside class="notice">
If you want to send an event with other common information use the <b>initABTracking</b> function to create the event. The SDK will ignore the common tracking information used by default.
</aside></p>

<p><code>- (instancetype)initABTracking:(ABDeviceType)pDeviceType longtitude:(double)pLong latitude :(double)pLat ipAdress :(NSString*)pAdressIp interfaceName:(NSString*)pInterfaceName</code></p>

<aside class="success">
Congratulations !!
<br><br>
You should now be able to use the ABTastySdk :)
</aside>
<h2 id='getting-variations'>Getting variations</h2>
<blockquote>
<p>Get Variation for Campaign</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code>    <span class="n">NSString</span> <span class="o">*</span><span class="n">variationId</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">getVariationForCampaignId</span><span class="p">:</span><span class="s">@"xxxxx"</span><span class="p">];</span>

    <span class="k">if</span><span class="p">([</span><span class="n">variationId</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@"aaaaa"</span><span class="p">]){</span>

        <span class="c1">// Manage your Variation aaaaa
</span>
    <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">([</span><span class="n">variationId</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@"bbbbb"</span><span class="p">]){</span> 

        <span class="c1">// Manage your Variation bbbbb
</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span> 

        <span class="c1">// The default behavior
</span>    <span class="p">}</span>
</code></pre><pre class="highlight swift tab-swift"><code>
    <span class="k">let</span> <span class="nv">variationId</span> <span class="o">=</span> <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">getVariationForCampaignId</span><span class="p">(</span><span class="s">"xxxxx"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">variationId</span> <span class="o">==</span> <span class="s">"aaaaa"</span> <span class="p">{</span>

            <span class="c1">// Manage your Variation aaaaa</span>

        <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="n">variationId</span> <span class="o">==</span> <span class="s">"bbbbb"</span> <span class="p">{</span>

            <span class="c1">// Manage your Variation bbbbb</span>

        <span class="p">}</span><span class="k">else</span><span class="p">{</span>

            <span class="c1">// The default behavior</span>
        <span class="p">}</span>
</code></pre>
<p>When the SDK is ready to use, all campaigns will have a variation allocated,that determine which of your campaign&#39;s variations they are going to see</p>

<p>To get this information use <code>getVariationForCampaignId</code> function in the ABTasty class located in the frameWork ABTastySdk.framework.</p>

<p>This function return NSString corresponding to the selected variation, or <code>nil</code> if :</p>

<ul>
<li>The campaign don&#39;t exist,</li>
<li>The campaign is not running </li>
<li>The SDK is not ready to use</li>
</ul>

<p>You should activate the campaign When you apply some changes for the variation, so the user will have the same beahvi</p>

<p><code>- (NSString*)getVariationForCampaignId:(NSString*)pCampaignId</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pCampaignId</td>
<td>NSString</td>
<td>campaign id</td>
</tr>
</tbody></table>

<aside class="notice">
Replace xxxxxx with the id of your campaign and, aaaaaa and bbbbbb with the different variations id of your campaign.
</aside>
<h3 id='block-operation-when-sdk-is-ready'>Block Operation When SDK is Ready</h3>
<blockquote>
<p>Execute Block when SDK is ready</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code>
    <span class="p">[</span><span class="n">ABTasty</span><span class="p">.</span><span class="n">sharedInstance</span> <span class="nf">executeWhenSdkReady</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>

        <span class="n">NSString</span> <span class="o">*</span> <span class="n">variationId</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">getVariationForCampaignId</span><span class="p">:</span><span class="s">@"xxxxx"</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">([</span><span class="n">variationId</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@""</span><span class="p">])</span> <span class="p">{</span>

            <span class="c1">// Manage variation aaaaa
</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">([</span><span class="n">variationId</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@""</span><span class="p">]){</span>

            <span class="c1">// Manage variation bbbbb
</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>

            <span class="c1">// The default behavior
</span>        <span class="p">}</span>
    <span class="p">}];</span>

</code></pre><pre class="highlight swift tab-swift"><code>
    <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span> <span class="p">{</span>

        <span class="k">let</span> <span class="nv">variation</span> <span class="o">=</span> <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">getVariationForCampaignId</span><span class="p">(</span><span class="s">"xxxxx"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">variation</span> <span class="o">==</span> <span class="s">"aaaaa"</span> <span class="p">{</span>

            <span class="c1">// Manage your variation aaaaa</span>


        <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="n">variation</span> <span class="o">==</span> <span class="s">"bbbbb"</span> <span class="p">{</span>

            <span class="c1">// Manage your variation bbbbb</span>

        <span class="p">}</span><span class="k">else</span><span class="p">{</span>

            <span class="c1">// The default behavior</span>
        <span class="p">}</span>
    <span class="p">}</span>

</code></pre>
<p>This function allow user to invoke block when the sdk is ready after fetches campaigns from the server side</p>

<p><code>- (void)executeWhenSdkReady:(void (^)(void))pBlock</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pBlock</td>
<td>block</td>
<td>The block to be invoked</td>
</tr>
</tbody></table>
<h2 id='activate-campaign'>Activate Campaign</h2>
<blockquote>
<p>Activate campaign</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code><span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">activateCampaign</span><span class="p">:</span><span class="s">@"campaignId"</span> <span class="nf">forVariationId</span><span class="p">:</span><span class="n">varId</span> <span class="n">atInterfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>
</code></pre><pre class="highlight swift tab-swift"><code><span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">activateCampaign</span><span class="p">(</span><span class="s">"campaignId"</span><span class="p">,</span> <span class="nv">forVariationId</span><span class="p">:</span> <span class="s">"varId"</span><span class="p">,</span> <span class="nv">atInterfaceName</span><span class="p">:</span><span class="s">"ABHomeViewController"</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Activate campaign with ABTracking Object</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code><span class="c1">// Tracking Object
</span><span class="n">ABTracking</span> <span class="o">*</span> <span class="n">tracking</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABTracking</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initABTracking</span><span class="p">:</span><span class="n">ABMobile</span> <span class="nf">longtitude</span><span class="p">:</span><span class="mi">2</span><span class="p">.</span><span class="mi">33</span> <span class="n">latitude</span><span class="o">:</span><span class="mi">48</span><span class="p">.</span><span class="mi">48</span> <span class="n">ipAdress</span><span class="o">:</span><span class="s">@"xxx.xxx.xxx.xxx"</span> <span class="n">interfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>

<span class="c1">// Activate campaign
</span><span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">activateCampaign</span><span class="p">:</span><span class="s">@"campaignId"</span> <span class="nf">forVariationId</span><span class="p">:</span><span class="s">@"varId"</span> <span class="n">withTracking</span><span class="o">:</span><span class="n">tracking</span><span class="p">];</span>

</code></pre><pre class="highlight swift tab-swift"><code><span class="c1">// Tracking Object</span>
<span class="k">let</span> <span class="nv">trackig</span> <span class="o">=</span> <span class="kt">ABTracking</span><span class="p">(</span><span class="nv">abTracking</span><span class="p">:</span><span class="kt">ABDeviceType</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span> <span class="nv">longtitude</span><span class="p">:</span> <span class="mf">2.33</span><span class="p">,</span> <span class="nv">latitude</span><span class="p">:</span> <span class="mf">48.33</span><span class="p">,</span> <span class="nv">ipAdress</span><span class="p">:</span> <span class="s">"xxx.xxx.xxx.xxx"</span><span class="p">,</span> <span class="nv">interfaceName</span><span class="p">:</span> <span class="s">"ABHomeViewController"</span><span class="p">)</span>

<span class="c1">// Activate Campaign "campaignId"</span>
<span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">activateCampaign</span><span class="p">(</span><span class="s">"campaignId"</span><span class="p">,</span> <span class="nv">forVariationId</span><span class="p">:</span> <span class="s">"variationId"</span><span class="p">,</span> <span class="nv">with</span><span class="p">:</span><span class="n">trackig</span><span class="p">)</span>
</code></pre>
<p><code>-(void)activateCampaign:(NSString*)pCampaignId forVariationId:(NSString*)pVariationID atInterfaceName:(NSString *)pInterfaceName</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pCampaignId</td>
<td>NSString</td>
<td>campaign id</td>
</tr>
<tr>
<td>pVariationID</td>
<td>NSString</td>
<td>variation id</td>
</tr>
<tr>
<td>pInterfaceName</td>
<td>NSString</td>
<td>interface name, the location where the campaign is activated</td>
</tr>
</tbody></table>

<p>Once a variation has been allocated to a campaign you need to activate it. This way it tells AB Tasty that the current user saw this specific variation of the campaign so that the user
always sees the same variation.</p>

<p>The allocation can be changed if you call <code>allocateVariation</code> several times until you use <code>activateCampaign</code> to activate the campaign and freeze the variation.</p>

<p>This <strong>activate</strong> function uses common tracking infos if they already set before starting the SDK</p>

<p>If you want to activate a campaign with another common tracking data, use this function :</p>

<p><code>- (void)activateCampaign:(NSString*)pCampaignId forVariationId:(NSString*)pVariationID withTracking:(ABTracking*)pTracking</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pCampaignId</td>
<td>NSString</td>
<td>campaign id</td>
</tr>
<tr>
<td>pVariationID</td>
<td>NSString</td>
<td>variation id</td>
</tr>
<tr>
<td>pTracking</td>
<td>ABTracking</td>
<td>Object that represents common tracking information</td>
</tr>
</tbody></table>
<h1 id='sending-events'>Sending events</h1>
<p>The library also provides some functions to send events to ABTasty, for example to send objectives configured for a campaign.</p>

<p>To do so, use the <code>sendTrackingEvent</code> method and specify the expected tracker as a parameter.</p>

<p>All existing trackers are listed below.</p>
<h2 id='abtracking'>ABTracking</h2>
<p>ABTracking is the generic tracker that contains common data and from which all others trackers inherit.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device_type</td>
<td>ABDeviceType</td>
<td>Device used by the visitor to view the test. The devices currently supported  are: <code>&quot;DESKTOP&quot;</code>, <code>&quot;MOBILE&quot;</code>, <code>&quot;TABLET&quot;</code>, <code>&quot;CAMERA&quot;</code>, <code>&quot;TV&quot;</code>, <code>&quot;GAMES_CONSOLE&quot;</code>, <code>&quot;PAYMENT_TERMINAL&quot;</code>, <code>&quot;WRISTWATCH&quot;</code>, and <code>&quot;OTHER&quot;</code>. <strong>required</strong></td>
</tr>
<tr>
<td>interfaceName</td>
<td>String</td>
<td>interface or page from where the event has been created <strong>required</strong></td>
</tr>
<tr>
<td>longitude</td>
<td>double</td>
<td>longitude of the device for geolocation  <strong>optional</strong></td>
</tr>
<tr>
<td>latitude</td>
<td>double</td>
<td> latitude  of the device for geolocation  <strong>optional</strong></td>
</tr>
<tr>
<td>ipAddress</td>
<td>String</td>
<td>current ip of the device <strong>optional</strong></td>
</tr>
</tbody></table>

<aside class="notice">
Common data can be automatically set from the ABTracking passed in the `startABTastySdk` when starting the SDK, or from another ABTracking instance.
</aside>

<p><br></p>
<h2 id='action-tracking'>Action Tracking</h2>
<blockquote>
<p>Send Action Tracking Event</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code><span class="n">ABActionTracking</span> <span class="o">*</span> <span class="n">action</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABActionTracking</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initABTracking</span><span class="p">:</span><span class="n">ABMobile</span> <span class="nf">longtitude</span><span class="p">:</span><span class="mi">2</span><span class="p">.</span><span class="mi">33</span> <span class="n">latitude</span><span class="o">:</span><span class="mi">48</span><span class="p">.</span><span class="mi">48</span> <span class="n">ipAdress</span><span class="o">:</span><span class="s">@"912.168.1.1"</span> <span class="n">interfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>
<span class="n">action</span><span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">@"MyGoal"</span><span class="p">;</span>
<span class="n">action</span><span class="p">.</span><span class="n">position_X</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">action</span><span class="p">.</span><span class="n">position_Y</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">action</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">@"value"</span><span class="p">;</span>    
<span class="c1">// Send Action Tracking 
</span><span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">sendTrackingEvent</span><span class="p">:</span><span class="n">action</span><span class="p">];</span>
</code></pre><pre class="highlight swift tab-swift"><code><span class="k">let</span> <span class="nv">action</span> <span class="p">:</span><span class="kt">ABActionTracking</span> <span class="o">=</span> <span class="kt">ABActionTracking</span><span class="p">(</span><span class="nv">abTracking</span><span class="p">:</span><span class="kt">ABDeviceType</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span> <span class="nv">longtitude</span><span class="p">:</span> <span class="mf">2.33</span><span class="p">,</span> <span class="nv">latitude</span><span class="p">:</span> <span class="mf">48.48</span><span class="p">,</span> <span class="nv">ipAdress</span><span class="p">:</span> <span class="s">"192.168.1.1"</span><span class="p">,</span> <span class="nv">interfaceName</span><span class="p">:</span> <span class="s">"ABHomeViewController"</span><span class="p">)</span>      
<span class="n">action</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"MyGoal"</span>
<span class="n">action</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">"value"</span>
<span class="n">action</span><span class="o">.</span><span class="n">position_X</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">action</span><span class="o">.</span><span class="n">position_Y</span> <span class="o">=</span> <span class="mi">12</span>
<span class="c1">// Send Action tracking</span>
<span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">sendTrackingEvent</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</code></pre>
<p><strong>ABActionTracking</strong>, This tracker sends a touch event</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td>Label of the click tracking as displayed in the reporting. <strong>required</strong></td>
</tr>
<tr>
<td>value</td>
<td>id</td>
<td>value attached to the action tracking event. Only NSString or NSNumber are accpeted. <strong>optional</strong></td>
</tr>
<tr>
<td>position_X</td>
<td>float</td>
<td>Object that contains the position x where the touch occurred in the mobile screen. <strong>required</strong></td>
</tr>
<tr>
<td>position_Y</td>
<td>float</td>
<td>Object that contains the position y where the touch occurred in the mobile screen. <strong>required</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h2 id='custom-tracking'>Custom Tracking</h2><pre class="highlight objective_c tab-objective_c"><code><span class="n">ABCustomEvent</span> <span class="o">*</span> <span class="n">customEvent</span> <span class="o">=</span>  <span class="p">[[</span><span class="n">ABCustomEvent</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initABTracking</span><span class="p">:</span><span class="n">ABMobile</span> <span class="nf">longtitude</span><span class="p">:</span><span class="mi">2</span><span class="p">.</span><span class="mi">33</span> <span class="n">latitude</span><span class="o">:</span><span class="mi">48</span><span class="p">.</span><span class="mi">48</span> <span class="n">ipAdress</span><span class="o">:</span><span class="s">@"xxx.xxx.xxx.xxx"</span> <span class="n">interfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>

<span class="p">[</span><span class="n">customEvent</span> <span class="nf">setValue</span><span class="p">:</span><span class="s">@"value"</span><span class="p">];</span>

<span class="p">[</span><span class="n">customEvent</span> <span class="nf">setGoal_name</span><span class="p">:</span><span class="s">@"GoalName"</span><span class="p">];</span>

<span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">sendTrackingEvent</span><span class="p">:</span><span class="n">customEvent</span><span class="p">];</span>
</code></pre><pre class="highlight swift tab-swift"><code><span class="k">let</span> <span class="nv">custom</span><span class="p">:</span><span class="kt">ABCustomEvent</span> <span class="o">=</span> <span class="kt">ABCustomEvent</span><span class="p">(</span><span class="nv">abTracking</span><span class="p">:</span> <span class="kt">ABDeviceType</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span> <span class="nv">longtitude</span><span class="p">:</span> <span class="mf">2.33</span><span class="p">,</span> <span class="nv">latitude</span><span class="p">:</span> <span class="mf">48.48</span><span class="p">,</span> <span class="nv">ipAdress</span><span class="p">:</span> <span class="s">"xxx.xxx.xxx.xxx"</span><span class="p">,</span> <span class="nv">interfaceName</span><span class="p">:</span> <span class="s">"ABHomeViewController"</span><span class="p">)</span>

<span class="n">custom</span><span class="o">.</span><span class="n">goal_name</span> <span class="o">=</span> <span class="s">"goal"</span>

<span class="n">custom</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">"value"</span>

<span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">sendTrackingEvent</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span>
</code></pre>
<p><strong>ABCustomEvent</strong> This tracker sends a custom event and lets you track events that are specific to your business.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>goal_name</td>
<td>String</td>
<td>Label of the custom event tracked as displayed in the reporting . <strong>required</strong></td>
</tr>
<tr>
<td>value</td>
<td>String</td>
<td>String value attached to the action tracking event. <strong>optional</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h2 id='transaction-tracking'>Transaction tracking</h2><pre class="highlight objective_c tab-objective_c"><code>
<span class="n">ABTransaction</span> <span class="o">*</span> <span class="n">transaction</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABTransaction</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initABTracking</span><span class="p">:</span><span class="n">ABMobile</span> <span class="nf">longtitude</span><span class="p">:</span><span class="mi">2</span><span class="p">.</span><span class="mi">33</span> <span class="n">latitude</span><span class="o">:</span><span class="mi">48</span><span class="p">.</span><span class="mi">48</span> <span class="n">ipAdress</span><span class="o">:</span><span class="s">@"xxx.xxx.xxx.xxx"</span> <span class="n">interfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>

<span class="n">transaction</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">@"transaction"</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">transaction_id</span> <span class="o">=</span> <span class="s">@"revenue"</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">revenue</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">shipping</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">tax_total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">23</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">discount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">payment_method</span> <span class="o">=</span> <span class="s">@"PayPal"</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">currencyName</span> <span class="o">=</span> <span class="s">@"currency_name"</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">currencyRate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">222</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">items_count</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>

<span class="c1">// Set micro transaction
</span><span class="n">ABMicroTransaction</span> <span class="o">*</span> <span class="n">minTransaction</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABMicroTransaction</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
<span class="n">minTransaction</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">@"name"</span><span class="p">;</span>
<span class="n">minTransaction</span><span class="p">.</span><span class="n">price</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">minTransaction</span><span class="p">.</span><span class="n">sku</span> <span class="o">=</span> <span class="s">@"sku"</span><span class="p">;</span>
<span class="n">minTransaction</span><span class="p">.</span><span class="n">category</span> <span class="o">=</span> <span class="s">@"cat"</span><span class="p">;</span>
<span class="n">minTransaction</span><span class="p">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">minTransaction</span><span class="p">.</span><span class="n">tax_amount</span> <span class="o">=</span> <span class="mi">1111</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">microTransaction</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableArray</span> <span class="nf">arrayWithObject</span><span class="p">:</span><span class="n">minTransaction</span><span class="p">];</span>
</code></pre><pre class="highlight swift tab-swift"><code><span class="k">let</span> <span class="nv">transaction</span><span class="p">:</span><span class="kt">ABTransaction</span> <span class="o">=</span> <span class="kt">ABTransaction</span><span class="p">(</span><span class="nv">abTracking</span><span class="p">:</span> <span class="kt">ABDeviceType</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span> <span class="nv">longtitude</span><span class="p">:</span> <span class="mf">2.33</span><span class="p">,</span> <span class="nv">latitude</span><span class="p">:</span> <span class="mf">48.33</span><span class="p">,</span> <span class="nv">ipAdress</span><span class="p">:</span><span class="s">"xxx.xxx.xxx.xxx"</span><span class="p">,</span> <span class="nv">interfaceName</span><span class="p">:</span> <span class="s">"ABHomeViewController"</span><span class="p">)</span>

<span class="n">transaction</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"transaction"</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">transaction_id</span> <span class="o">=</span> <span class="s">"revenue"</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">revenue</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">shipping</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">tax_total</span> <span class="o">=</span> <span class="mf">0.23</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">discount</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">payment_method</span> <span class="o">=</span> <span class="s">"PayPal"</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">currencyName</span> <span class="o">=</span> <span class="s">"currency_name"</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">currencyRate</span> <span class="o">=</span> <span class="mf">0.222</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">items_count</span> <span class="o">=</span> <span class="mi">12</span>

<span class="c1">// Set micro transaction</span>
<span class="k">let</span> <span class="nv">miniTransaction</span><span class="p">:</span><span class="kt">ABMicroTransaction</span> <span class="o">=</span> <span class="kt">ABMicroTransaction</span><span class="p">()</span>
<span class="n">miniTransaction</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"name"</span>
<span class="n">miniTransaction</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">miniTransaction</span><span class="o">.</span><span class="n">sku</span> <span class="o">=</span> <span class="s">"sku"</span>
<span class="n">miniTransaction</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="s">"cat"</span>
<span class="n">miniTransaction</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">miniTransaction</span><span class="o">.</span><span class="n">tax_amount</span> <span class="o">=</span> <span class="mi">1111</span>
<span class="n">transaction</span><span class="o">.</span><span class="n">microTransaction</span> <span class="o">=</span> <span class="p">[</span><span class="n">miniTransaction</span><span class="p">];</span>
<span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">sendTrackingEvent</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
</code></pre>
<p>The <strong>ABTransaction</strong> lets you track any purchase on your mobile app.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Label of the Transaction as displayed in the reporting.<strong>required</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string</td>
<td>Unique identifier of the transaction.<strong>required</strong></td>
</tr>
<tr>
<td>revenue</td>
<td>double</td>
<td>Total amount of money spent by the visitor expressed in cents. <strong>required</strong></td>
</tr>
<tr>
<td>shipping</td>
<td>double</td>
<td>Shipping cost - expressed in cents.<strong>required</strong></td>
</tr>
<tr>
<td>tax_total</td>
<td>double</td>
<td>Total tax expressed in cents. <strong>optional</strong></td>
</tr>
<tr>
<td>discount</td>
<td>double</td>
<td>Discount in cents, if applicable. <strong>optional</strong></td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td> Means of payment. <strong>optional</strong></td>
</tr>
<tr>
<td>items_count</td>
<td>double</td>
<td>Total number of products purchased on the mobile app. <strong>optional</strong></td>
</tr>
<tr>
<td>currencyName</td>
<td>string</td>
<td>Name of the money used for the payment. <strong>required</strong></td>
</tr>
<tr>
<td>currencyRate</td>
<td>float</td>
<td>Change rate between USD in cents (used as a reference) and the money used for the payment. <strong>required</strong></td>
</tr>
<tr>
<td>microTransaction</td>
<td>ABMicroTransaction</td>
<td>Products purchased on the web site/mobile app. <strong>optional</strong></td>
</tr>
</tbody></table>

<p><strong>ABMicroTransaction</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Label of the product.  <strong>required</strong></td>
</tr>
<tr>
<td>price</td>
<td>int</td>
<td>Price of the item expressed in cents.<strong>required</strong></td>
</tr>
<tr>
<td>sku</td>
<td>string</td>
<td>Identifier of the item. <strong>optional</strong></td>
</tr>
<tr>
<td>category</td>
<td>string</td>
<td>Category of product the item belongs to.</td>
</tr>
<tr>
<td>quantity</td>
<td>int</td>
<td>Number of identical products purchased at the same time on the mobile app. <strong>optional</strong></td>
</tr>
<tr>
<td>tax_amount</td>
<td>int</td>
<td>Tax amount applied to the item. <strong>optional</strong></td>
</tr>
<tr>
<td>tax_rate</td>
<td>float</td>
<td>Percentage of tax applied to the item. <strong>optional</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h2 id='visit-tracking'>Visit tracking</h2><pre class="highlight objective_c tab-objective_c"><code><span class="n">ABVisitEvent</span> <span class="o">*</span> <span class="n">visitEvent</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABVisitEvent</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initABTracking</span><span class="p">:</span><span class="n">ABMobile</span> <span class="nf">longtitude</span><span class="p">:</span><span class="mi">2</span><span class="p">.</span><span class="mi">33</span> <span class="n">latitude</span><span class="o">:</span><span class="mi">48</span><span class="p">.</span><span class="mi">33</span> <span class="n">ipAdress</span><span class="o">:</span><span class="s">@"xxx.xxx.xxx.xxx"</span> <span class="n">interfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>

<span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">sendTrackingEvent</span><span class="p">:</span><span class="n">visitEvent</span><span class="p">];</span>

</code></pre><pre class="highlight swift tab-swift"><code><span class="k">let</span> <span class="nv">visitEvent</span><span class="p">:</span><span class="kt">ABVisitEvent</span> <span class="o">=</span> <span class="kt">ABVisitEvent</span><span class="p">(</span><span class="nv">abTracking</span><span class="p">:</span> <span class="kt">ABDeviceType</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span> <span class="nv">longtitude</span><span class="p">:</span> <span class="mf">2.33</span><span class="p">,</span> <span class="nv">latitude</span><span class="p">:</span> <span class="mf">48.33</span><span class="p">,</span> <span class="nv">ipAdress</span><span class="p">:</span><span class="s">"xxx.xxx.xxx.xxx"</span><span class="p">,</span> <span class="nv">interfaceName</span><span class="p">:</span> <span class="s">"ABHomeViewController"</span><span class="p">)</span>

 <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">sendTrackingEvent</span><span class="p">(</span><span class="n">visitEvent</span><span class="p">)</span>
</code></pre>
<p>The <strong>ABVisitEvent</strong> lets you track any visit occurring on a mobile app.</p>

<p>No parameters are needed for this event as the SDK uses the <code>COMMON TRACKING INFORMATIONS</code> set before when starting the SDK.
<br></p>
<h1 id='reference'>Reference</h1>
<p><a href='http://sdk.abtasty.com/ios/ref/index.html'>Reference</a></p>
<h1 id='releases'>Releases</h1><h3 id='b0-1-0'>b0.1.0</h3>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="objective_c">objective_c</a>
                <a href="#" data-language-name="swift">swift</a>
          </div>
      </div>
    </div>
  </body>
</html>
