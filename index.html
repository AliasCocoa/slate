
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ABTastySDK documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;objective_c&quot;,&quot;swift&quot;,&quot;ruby&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="objective_c">objective_c</a>
              <a href="#" data-language-name="swift">swift</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#welcome" class="toc-h1 toc-link" data-title="welcome">Welcome</a>
          </li>
          <li>
            <a href="#app-prerequisites" class="toc-h1 toc-link" data-title="app-prerequisites">App prerequisites</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="getting-started">Getting started</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#cocoapods" class="toc-h2 toc-link" data-title="cocoapods">Cocoapods</a>
                  </li>
                  <li>
                    <a href="#manual-installation" class="toc-h2 toc-link" data-title="manual-installation">Manual Installation</a>
                  </li>
                  <li>
                    <a href="#apple-store-submission" class="toc-h2 toc-link" data-title="apple-store-submission">Apple Store Submission</a>
                  </li>
                  <li>
                    <a href="#initialize-abtastysdk" class="toc-h2 toc-link" data-title="initialize-abtastysdk">Initialize ABTastySDK</a>
                  </li>
                  <li>
                    <a href="#initialize-with-tracking-data" class="toc-h2 toc-link" data-title="initialize-with-tracking-data">Initialize with Tracking data</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#starting-campaigns" class="toc-h1 toc-link" data-title="starting-campaigns">Starting campaigns</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#allocate-camapign" class="toc-h2 toc-link" data-title="allocate-camapign">Allocate Camapign</a>
                  </li>
                  <li>
                    <a href="#allocate-sevral-camapigns" class="toc-h2 toc-link" data-title="allocate-sevral-camapigns">Allocate Sevral Camapigns</a>
                  </li>
                  <li>
                    <a href="#activate-campaign" class="toc-h2 toc-link" data-title="activate-campaign">Activate Campaign</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sending-events" class="toc-h1 toc-link" data-title="sending-events">Sending events</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#abtracking" class="toc-h2 toc-link" data-title="abtracking">ABTracking</a>
                  </li>
                  <li>
                    <a href="#campaign-activation-tracking" class="toc-h2 toc-link" data-title="campaign-activation-tracking">Campaign Activation Tracking</a>
                  </li>
                  <li>
                    <a href="#action-tracking" class="toc-h2 toc-link" data-title="action-tracking">Action Tracking</a>
                  </li>
                  <li>
                    <a href="#custom-tracking" class="toc-h2 toc-link" data-title="custom-tracking">Custom Tracking</a>
                  </li>
                  <li>
                    <a href="#transaction-tracking" class="toc-h2 toc-link" data-title="transaction-tracking">Transaction tracking</a>
                  </li>
                  <li>
                    <a href="#visit-tracking" class="toc-h2 toc-link" data-title="visit-tracking">Visit tracking</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#reference" class="toc-h1 toc-link" data-title="reference">Reference</a>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='welcome'>Welcome</h1>
<p>Welcome to the AB Tasty for app <strong>ABTastySdk</strong> documentation!</p>

<p>The ABTastySDK project is an iOS Framework that helps you to make server side tests on your native iOS app.</p>

<p>You can use this FrameWork to access AB Tasty endpoints, which can generate a unique visitor ID, allocate a visitor to a test, and push visits and conversions events in order to help you analyze the outcomes of your campaigns.</p>

<p>Should you have any question about this documentation, feel free to <a href="mailto:contact@abtastycom">reach out to us</a>.</p>
<h1 id='app-prerequisites'>App prerequisites</h1>
<ul>
<li><p>Your app must be a native app written in Swift or Objective C.</p></li>
<li><p>ABTastySdk support minimum ios 8.0+</p></li>
</ul>
<h1 id='getting-started'>Getting started</h1>
<p>ABtastySDK is available through Pods and manual installation.</p>
<h3 id='cocoapods'>Cocoapods</h3>
<ol>
<li><p><a href='https://guides.cocoapods.org/'>Install CocoaPods.</a></p></li>
<li><p>Open Terminal and navigate to the directory that contains your project then enter the folowing command: `pod init</p></li>
<li><p>Open your Podfile and add the following line to the Podfile </p></li>
</ol>

<p><img src="images/pods.png" alt="alt text" /></p>

<p>Make sure  <code>use_frameworks!</code>  is also included in the Podfile:</p>

<p><img src="images/use.png" alt="alt text" /></p>

<ol>
<li><p>Run <code>pod install</code> from your Xcode project&#39;s base directory</p></li>
<li><p>Make sure to always open the Xcode workspace instead of the project file when building your project</p></li>
</ol>
<h3 id='manual-installation'>Manual Installation</h3>
<ol>
<li><p>Download the frameWork  <a href='http://sdk.abtasty.com/ios/ABTastySdk.zip'>ABTastySdk.framework.</a></p></li>
<li><p>In Finder, navigate to the ABTastySdk.framework file and drop it under your &quot;Embedded Binaries&quot; section in Xcode</p></li>
<li><p>After this manipulation, a popup will open, into it, don&#39;t forget to check &quot;Copy items if needed&quot;.</p></li>
</ol>
<h3 id='apple-store-submission'>Apple Store Submission</h3>
<aside class="notice">
<b>ABTastySdk FrameWork is Universal and BitCode is enabled</b> <br>
The universal framework for iOS contain architectures for Simulator and Device, you can run on all your devices and the iOS Simulator
</aside>

<p>If you have universal framework installed in your application, apple store will reject your app because unwanted architecture.
You need to Add a Run Script step to your build steps, put it after your step to embed
frameworks, set it to use /bin/sh</p>

<p>and enter the following script:</p>
<pre class="highlight shell tab-shell"><code><span class="nv">FRAMEWORK</span><span class="o">=</span><span class="s2">"ABTastySdk"</span>
<span class="nv">FRAMEWORK_EXECUTABLE_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">BUILT_PRODUCTS_DIR</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">FRAMEWORKS_FOLDER_PATH</span><span class="k">}</span><span class="s2">/</span><span class="nv">$FRAMEWORK</span><span class="s2">.framework/</span><span class="nv">$FRAMEWORK</span><span class="s2">"</span>
<span class="nv">EXTRACTED_ARCHS</span><span class="o">=()</span>
<span class="k">for </span>ARCH <span class="k">in</span> <span class="nv">$ARCHS</span>
<span class="k">do
</span>lipo -extract <span class="s2">"</span><span class="nv">$ARCH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">"</span> -o <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">-</span><span class="nv">$ARCH</span><span class="s2">"</span>
EXTRACTED_ARCHS+<span class="o">=(</span><span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">-</span><span class="nv">$ARCH</span><span class="s2">"</span><span class="o">)</span>
<span class="k">done
</span>lipo -o <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">-merged"</span> -create <span class="s2">"</span><span class="k">${</span><span class="nv">EXTRACTED_ARCHS</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span>
rm <span class="s2">"</span><span class="k">${</span><span class="nv">EXTRACTED_ARCHS</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span>
rm <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">"</span>
mv <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">-merged"</span> <span class="s2">"</span><span class="nv">$FRAMEWORK_EXECUTABLE_PATH</span><span class="s2">"</span>
</code></pre>
<p><img src="images/universalscript.png" alt="alt text" /></p>
<h3 id='initialize-abtastysdk'>Initialize ABTastySDK</h3>
<blockquote>
<p>Add the following code into your AppDelegate.m file</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>

    <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">startABTastySdk</span><span class="p">:</span><span class="s">@"YOUR_ACCESS_KEY"</span><span class="p">];</span>
    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight swift tab-swift"><code>    <span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplicationLaunchOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>        
        <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">startSdk</span><span class="p">(</span><span class="s">"YOUR_ACCESS_KEY"</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">true</span>
    <span class="p">}</span>
</code></pre>
<p>To run experiments with ABTasty you&#39;ll need to initialize ABTasty with AB_TASTY_KEY. ABTasty instance can both allocate, activate experiments and track events.</p>

<p>To do this, you just have to call the function <code>startABTastySdk</code> in the ABTasty class located in the frameWork ABTastySdk.framework. For each new user, at the very first initialization, the SDK is going to ask for a new visitor id to our servers and save it in a user Default</p>

<aside class="notice">
Replace <code>AB_TASTY_KEY</codbe> with the key provided by AB Tasty.
</aside>

<p><code>(void)startABTastySdk:(NSString*)appId</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>appId</td>
<td>NSString</td>
<td>Access key provided by AB Tasty</td>
</tr>
</tbody></table>
<h3 id='initialize-with-tracking-data'>Initialize with Tracking data</h3><pre class="highlight objective_c tab-objective_c"><code> <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">startABTastySdk</span><span class="p">:</span><span class="s">@"YOUR_ACCESS_KEY"</span> <span class="nf">WithTrackingInfos</span><span class="p">:</span>
    <span class="p">@{</span><span class="s">@"adel"</span><span class="o">:</span><span class="mi">@1</span><span class="p">,</span>
    <span class="s">@"Longitude"</span><span class="o">:</span><span class="mf">@2.3333</span><span class="p">,</span>
    <span class="s">@"Latitude"</span><span class="o">:</span> <span class="mf">@48.48</span><span class="p">,</span>
    <span class="s">@"ipAddress"</span><span class="o">:</span><span class="s">@"192.168.1.1"</span>
    <span class="p">}];</span>
</code></pre><pre class="highlight swift tab-swift"><code>     <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">startSdk</span><span class="p">(</span><span class="s">"YOUR_ACCESS_KEY"</span><span class="p">,</span> <span class="nv">withTrackingInfos</span><span class="p">:</span>
         <span class="p">[</span><span class="s">"Longitude"</span><span class="p">:</span><span class="mf">2.3333</span><span class="p">,</span> <span class="s">"Latitude"</span><span class="p">:</span><span class="mf">48.48</span><span class="p">,,</span><span class="s">"ipAddress"</span><span class="p">:</span><span class="s">"192.168.1.1"</span><span class="p">])</span>
</code></pre>
<p><code>- (void)startABTastySdk:(NSString*)appId WithTrackingInfos:(NSDictionary*)pInfosTracking</code></p>

<p>This method allows you to set common default tracking data that you want to share between all your events.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>appId</td>
<td>NSString</td>
<td>Access key provided by AB Tasty</td>
</tr>
<tr>
<td>pInfosTracking</td>
<td>NSDictionary</td>
<td>infos tracking for common default data</td>
</tr>
</tbody></table>

<p><br></p>

<p><strong>COMMON TRACKING INFORMATIONS</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Longitude</td>
<td>Double</td>
<td>Longitude</td>
</tr>
<tr>
<td>Latitude</td>
<td>Double</td>
<td>Latitude</td>
</tr>
<tr>
<td>ipAddress</td>
<td>NSDictionary</td>
<td>ip adress</td>
</tr>
</tbody></table>

<aside class="success">
Congratulations !!
<br><br>
You should know be able to use the AB Tasty librarybyapi :)
</aside>
<h1 id='starting-campaigns'>Starting campaigns</h1>
<p>This section of the documentation aims to help you to start a new campaign in your app using the ABTasty SDK.</p>
<h3 id='allocate-camapign'>Allocate Camapign</h3>
<p>Once you get your visitor id, you can allocate campaign by calling <code>allocateVariation</code> function</p>

<blockquote>
<p>Allocate one campaign </p>
</blockquote>
<pre class="highlight swift tab-swift"><code>        <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">allocateVariation</span><span class="p">(</span><span class="s">"campaignId"</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span> <span class="n">variationId</span><span class="p">,</span><span class="n">error</span><span class="p">)</span> <span class="k">in</span>

            <span class="k">if</span> <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">error</span> <span class="p">{</span>

                <span class="nf">print</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="k">let</span> <span class="nv">variationId</span> <span class="o">=</span> <span class="n">variationId</span> <span class="p">{</span>

                <span class="k">if</span><span class="p">(</span><span class="n">variationId</span> <span class="o">==</span> <span class="s">"varId1"</span><span class="p">){</span>

                    <span class="c1">// Execute code for varId1</span>

                <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">variationId</span> <span class="o">==</span> <span class="s">"varId2"</span><span class="p">){</span>

                    <span class="c1">// Execute code for varId2</span>

                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
</code></pre><pre class="highlight objective_c tab-objective_c"><code>    <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">allocateVariation</span><span class="p">:</span><span class="s">@"campaignId"</span> <span class="nf">completionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span> <span class="n">variationId</span><span class="p">,</span><span class="n">NSError</span><span class="o">*</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">){</span>

            <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">.</span><span class="n">description</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">([</span><span class="n">variationId</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@"varId1"</span><span class="p">]){</span>
            <span class="c1">// Execute code variation for varId1
</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">([</span><span class="n">variationId</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="s">@"varId2"</span><span class="p">]){</span>
                <span class="c1">// Execute code variation for varId2
</span>            <span class="p">}</span>

        <span class="p">}</span>
    <span class="p">}];</span>
</code></pre>
<p><code>- (void)allocateVariation:(NSString*)pIdCampaign completionBlock:(void(^)(NSString*,NSError*))pOnGetVariationId</code></p>

<p>It uses the campaign id and a block as parameters which is going to be invoked when a variation is allocated to this campaign.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pIdCampaign</td>
<td>String</td>
<td>id of the campaign</td>
</tr>
<tr>
<td>pOnGetVariationId</td>
<td>block</td>
<td>block to be invoked when a variation is selected for this campaign.</td>
</tr>
</tbody></table>

<aside class="notice">
Replace <code>campaignId</code> with the id of your campaign and, <code>varId1</code> and <code>varId2</code> with the different variations id of your campaign.
</aside>
<h3 id='allocate-sevral-camapigns'>Allocate Sevral Camapigns</h3>
<blockquote>
<p>Allocate sevral campaign with simple call</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code>    <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">allocateVariations</span><span class="p">:[</span><span class="n">NSArray</span> <span class="nf">arrayWithObjects</span><span class="p">:</span><span class="s">@"campaignId1"</span><span class="p">,</span><span class="s">@"campaignId2"</span><span class="p">,</span><span class="s">@"campaignId3"</span><span class="p">,</span><span class="s">@"campaignId3"</span><span class="p">,</span> <span class="nb">nil</span><span class="p">]</span> <span class="nf">completionBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSArray</span><span class="o">&lt;</span><span class="n">ABCampaign</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">variationIdArray</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">variationIdArray</span><span class="p">)</span> <span class="p">{</span>

            <span class="c1">// Here in this array you have all the varaitionID with their camapignId in the ABCampaign Object
</span>        <span class="p">}</span>

    <span class="p">}];</span>
</code></pre><pre class="highlight swift tab-swift"><code>    <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">allocateVariations</span><span class="p">([</span><span class="s">"campaignId1"</span><span class="p">,</span><span class="s">"campaignId2"</span><span class="p">,</span><span class="s">"campaignId3"</span><span class="p">,</span><span class="s">"campaignId4"</span><span class="p">,</span><span class="s">"campaignId5"</span><span class="p">])</span> <span class="p">{</span> <span class="p">(</span><span class="n">arrayCampaign</span><span class="p">)</span> <span class="k">in</span>       
        <span class="k">if</span> <span class="k">let</span> <span class="nv">arrayCampaign</span> <span class="o">=</span> <span class="n">arrayCampaign</span><span class="p">{</span>

            <span class="k">for</span> <span class="nv">item</span><span class="p">:</span><span class="kt">ABCampaign</span> <span class="k">in</span> <span class="n">arrayCampaign</span><span class="p">{</span>

                 <span class="c1">// Here in this array you have all the varaitionID with their camapignId in the ABCampaign Object                </span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>
<p>You can also allocate sevral campaign with simple call function <code>allocateVariations</code>, the completion block pOnGetAllVariationId invoke with <strong>ABCampaign</strong> object</p>

<p><code>- (void)allocateVariations:(NSArray&lt;NSString*&gt;*)pIdCampaignArray completionBlock:(void(^)(NSArray&lt;ABCampaign*&gt;*))pOnGetAllVariationId</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pIdCampaignArray</td>
<td>NSArray</td>
<td>array of campaign id</td>
</tr>
<tr>
<td>pOnGetAllVariationId</td>
<td>block</td>
<td>block to be invoked when all variations is selected for those campaigns.</td>
</tr>
</tbody></table>
<h2 id='activate-campaign'>Activate Campaign</h2><pre class="highlight objective_c tab-objective_c"><code>
    <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">activateCampaign</span><span class="p">:</span><span class="s">@"campaignId"</span> <span class="nf">forVariationId</span><span class="p">:</span><span class="n">varId</span><span class="p">];</span>
</code></pre><pre class="highlight swift tab-swift"><code>    <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">activateCampaign</span><span class="p">(</span><span class="s">"campaignId"</span><span class="p">,</span> <span class="nv">forVariationId</span><span class="p">:</span> <span class="s">"varId"</span><span class="p">)</span>
</code></pre>
<p>Once a variation has been allocated to a campaign you need to activate it. This way it tells AB Tasty that the current user saw this specific variation of the campaign so that the user
always sees the same variation.</p>

<p>The allocation can be changeg if you call <code>allocateVariation</code> several times until you use <code>activateCampaign</code> to activate the campaign and freeze the variation.</p>

<p><em>@See <code>activateCampaign</code> in the <a href="#activate">tracking section</a></em></p>
<h1 id='sending-events'>Sending events</h1>
<p>The library also provides some functions to send events to ABTasty, for example to send objectives configured for a campaign.</p>

<p>To do so, use the <code>sendTrackingEvent</code> method and specify the expected tracker as a parameter.</p>

<p>All existing trackers are listed below.</p>

<p><br></p>
<h2 id='abtracking'>ABTracking</h2>
<p>ABTracking is the generic tracker that contains common data and from which all others trackers inherit.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device_type</td>
<td>ABDeviceType</td>
<td>Device used by the visitor to view the test. The devices currently supported  are: <code>&quot;DESKTOP&quot;</code>, <code>&quot;MOBILE&quot;</code>, <code>&quot;TABLET&quot;</code>, <code>&quot;CAMERA&quot;</code>, <code>&quot;TV&quot;</code>, <code>&quot;GAMES_CONSOLE&quot;</code>, <code>&quot;PAYMENT_TERMINAL&quot;</code>, <code>&quot;WRISTWATCH&quot;</code>, and <code>&quot;OTHER&quot;</code>. <strong>required</strong></td>
</tr>
<tr>
<td>interfaceName</td>
<td>String</td>
<td>interface or page from where the event has been created <strong>required</strong></td>
</tr>
<tr>
<td>longitude</td>
<td>double</td>
<td>longitude of the device for geolocation  <strong>optional</strong></td>
</tr>
<tr>
<td>latitude</td>
<td>double</td>
<td>Â latitude  of the device for geolocation  <strong>optional</strong></td>
</tr>
<tr>
<td>ipAdress</td>
<td>String</td>
<td>current ip of the device <strong>optional</strong></td>
</tr>
</tbody></table>

<aside class="notice">
Common data can be automatically set from the ABTracking passed in the `startABTastySdk` at start SDK, or from another ABTracking instance.
</aside>

<p><br></p>

<p><a name="activate"></a></p>
<h2 id='campaign-activation-tracking'>Campaign Activation Tracking</h2><pre class="highlight kotlin tab-kotlin"><code><span class="kd">val</span> <span class="py">tracker</span> <span class="p">=</span> <span class="n">ABCampaignActivationTracker</span><span class="p">.</span><span class="n">Builder</span><span class="p">()</span>
<span class="p">.</span><span class="n">setCampaignId</span><span class="p">(</span><span class="s">"xxxxxx"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setVariationId</span><span class="p">(</span><span class="s">"bbbbbbb"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setOrigin</span><span class="p">(</span><span class="s">"LoginActivity"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setDeviceType</span><span class="p">(</span><span class="n">DeviceType</span><span class="p">.</span><span class="n">MOBILE_PHONE</span><span class="p">)</span>
<span class="p">.</span><span class="n">setTimestamp</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="n">currentTimeMillis</span><span class="p">()</span> <span class="p">/</span> <span class="m">1000</span><span class="p">)</span>
<span class="p">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">ABTasty</span><span class="p">.</span><span class="n">sendTrackingEvent</span><span class="p">(</span><span class="n">tracker</span><span class="p">)</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">ABCampaignActivationTracker</span> <span class="n">activation</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ABCampaignActivationTracker</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
<span class="o">.</span><span class="na">setCampaignId</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setVariationId</span><span class="o">(</span><span class="s">"bbbbbb"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setOrigin</span><span class="o">(</span><span class="s">"LoginActivity"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setDeviceType</span><span class="o">(</span><span class="n">DeviceType</span><span class="o">.</span><span class="na">MOBILE_PHONE</span><span class="o">)</span>
<span class="o">.</span><span class="na">setTimestamp</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">)</span>
<span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">sendTrackingEvent</span><span class="o">(</span><span class="n">activation</span><span class="o">);</span>
</code></pre>
<p>This tracker activates a campaign and its variation.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>campaign_id</td>
<td>String</td>
<td>campaign id to be activated <strong>required</strong></td>
</tr>
<tr>
<td>variation_id</td>
<td>String</td>
<td>variation id of the campaign to be activated <strong>required</strong></td>
</tr>
</tbody></table>

<aside class="notice">
Replace <code>xxxxxx</code> with the id of your campaign and <code>bbbbbb</code> with the selected variations id of your campaign.
</aside>

<p><br></p>
<h2 id='action-tracking'>Action Tracking</h2>
<blockquote>
<p>Send Action Tracking Event</p>
</blockquote>
<pre class="highlight objective_c tab-objective_c"><code><span class="n">ABActionTracking</span> <span class="o">*</span> <span class="n">action</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABActionTracking</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initABTracking</span><span class="p">:</span><span class="n">ABMobile</span> <span class="nf">longtitude</span><span class="p">:</span><span class="mi">2</span><span class="p">.</span><span class="mi">33</span> <span class="n">latitude</span><span class="o">:</span><span class="mi">48</span><span class="p">.</span><span class="mi">48</span> <span class="n">ipAdress</span><span class="o">:</span><span class="s">@"912.168.1.1"</span> <span class="n">interfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>
<span class="n">action</span><span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">@"MyGoal"</span><span class="p">;</span>
<span class="n">action</span><span class="p">.</span><span class="n">position_X</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">action</span><span class="p">.</span><span class="n">position_Y</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">action</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">@"value"</span><span class="p">;</span>    
<span class="c1">// Send Action Tracking 
</span><span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">sendTrackingEvent</span><span class="p">:</span><span class="n">action</span><span class="p">];</span>
</code></pre><pre class="highlight swift tab-swift"><code><span class="k">let</span> <span class="nv">action</span> <span class="p">:</span><span class="kt">ABActionTracking</span> <span class="o">=</span> <span class="kt">ABActionTracking</span><span class="p">(</span><span class="nv">abTracking</span><span class="p">:</span><span class="kt">ABDeviceType</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span> <span class="nv">longtitude</span><span class="p">:</span> <span class="mf">2.33</span><span class="p">,</span> <span class="nv">latitude</span><span class="p">:</span> <span class="mf">48.48</span><span class="p">,</span> <span class="nv">ipAdress</span><span class="p">:</span> <span class="s">"192.168.1.1"</span><span class="p">,</span> <span class="nv">interfaceName</span><span class="p">:</span> <span class="s">"ABHomeViewController"</span><span class="p">)</span>      
<span class="n">action</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"MyGol"</span>
<span class="n">action</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">"value"</span>
<span class="n">action</span><span class="o">.</span><span class="n">position_X</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">action</span><span class="o">.</span><span class="n">position_Y</span> <span class="o">=</span> <span class="mi">12</span>
<span class="c1">// Send Action tracking</span>
<span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">sendTrackingEvent</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</code></pre>
<p><strong>ABActionTracking</strong>, This tracker sends touch event</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td>Label of the click tracking/touch as displayed in the reporting. <strong>required</strong></td>
</tr>
<tr>
<td>type</td>
<td>ActionType</td>
<td>Type of event CLICK or TOUCH <strong>required</strong></td>
</tr>
<tr>
<td>value</td>
<td>id</td>
<td>value attached to the action tracking event. Only NSString or NSNumber are accpeted. <strong>optional</strong></td>
</tr>
<tr>
<td>position_X</td>
<td>float</td>
<td>Object that contains the position x where the touch occurred in the mobile screen. <strong>required for TOUCH</strong></td>
</tr>
<tr>
<td>position_Y</td>
<td>float</td>
<td>Object that contains the position y where the touch occurred in the mobile screen. <strong>required for TOUCH</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h2 id='custom-tracking'>Custom Tracking</h2><pre class="highlight objective_c tab-objective_c"><code>    <span class="n">ABCustomEvent</span> <span class="o">*</span> <span class="n">customEvent</span> <span class="o">=</span>  <span class="p">[[</span><span class="n">ABCustomEvent</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initABTracking</span><span class="p">:</span><span class="n">ABMobile</span> <span class="nf">longtitude</span><span class="p">:</span><span class="mi">2</span><span class="p">.</span><span class="mi">33</span> <span class="n">latitude</span><span class="o">:</span><span class="mi">48</span><span class="p">.</span><span class="mi">48</span> <span class="n">ipAdress</span><span class="o">:</span><span class="s">@"192.168.1.1"</span> <span class="n">interfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>
    <span class="p">[</span><span class="n">customEvent</span> <span class="nf">setValue</span><span class="p">:</span><span class="s">@"value"</span><span class="p">];</span>
    <span class="p">[</span><span class="n">customEvent</span> <span class="nf">setGoal_name</span><span class="p">:</span><span class="s">@"GoalName"</span><span class="p">];</span>
    <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">sendTrackingEvent</span><span class="p">:</span><span class="n">customEvent</span><span class="p">];</span>
</code></pre><pre class="highlight swift tab-swift"><code><span class="k">let</span> <span class="nv">custom</span><span class="p">:</span><span class="kt">ABCustomEvent</span> <span class="o">=</span> <span class="kt">ABCustomEvent</span><span class="p">(</span><span class="nv">abTracking</span><span class="p">:</span> <span class="kt">ABDeviceType</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span> <span class="nv">longtitude</span><span class="p">:</span> <span class="mf">2.33</span><span class="p">,</span> <span class="nv">latitude</span><span class="p">:</span> <span class="mf">48.48</span><span class="p">,</span> <span class="nv">ipAdress</span><span class="p">:</span> <span class="s">"192.168.1.1"</span><span class="p">,</span> <span class="nv">interfaceName</span><span class="p">:</span> <span class="s">"ABHomeViewController"</span><span class="p">)</span>
<span class="n">custom</span><span class="o">.</span><span class="n">goal_name</span> <span class="o">=</span> <span class="s">"goal"</span>
<span class="n">custom</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">"value"</span>
<span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">sendTrackingEvent</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span>
</code></pre>
<p><strong>ABCustomEvent</strong> This tracker sends a custom event and lets you track events that are specific to your business.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>goal_name</td>
<td>String</td>
<td>Label of the click tracked as displayed in the reporting . <strong>required</strong></td>
</tr>
<tr>
<td>value</td>
<td>String</td>
<td>String value attached to the action tracking event. <strong>optional</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h2 id='transaction-tracking'>Transaction tracking</h2><pre class="highlight objective_c tab-objective_c"><code>
    <span class="n">ABTransaction</span> <span class="o">*</span> <span class="n">transaction</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABTransaction</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initABTracking</span><span class="p">:</span><span class="n">ABMobile</span> <span class="nf">longtitude</span><span class="p">:</span><span class="mi">2</span><span class="p">.</span><span class="mi">33</span> <span class="n">latitude</span><span class="o">:</span><span class="mi">48</span><span class="p">.</span><span class="mi">48</span> <span class="n">ipAdress</span><span class="o">:</span><span class="s">@"192.168.1.1"</span> <span class="n">interfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>

    <span class="n">transaction</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">@"transaction"</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">transaction_id</span> <span class="o">=</span> <span class="s">@"revenue"</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">revenue</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">shipping</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">tax_total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">23</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">discount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">payment_method</span> <span class="o">=</span> <span class="s">@"PayPal"</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">currencyName</span> <span class="o">=</span> <span class="s">@"currency_name"</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">currencyRate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">222</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">items_count</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>

    <span class="c1">// Set micro transaction
</span>    <span class="n">ABMicroTransaction</span> <span class="o">*</span> <span class="n">minTransaction</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABMicroTransaction</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
    <span class="n">minTransaction</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">@"name"</span><span class="p">;</span>
    <span class="n">minTransaction</span><span class="p">.</span><span class="n">price</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
    <span class="n">minTransaction</span><span class="p">.</span><span class="n">sku</span> <span class="o">=</span> <span class="s">@"sku"</span><span class="p">;</span>
    <span class="n">minTransaction</span><span class="p">.</span><span class="n">category</span> <span class="o">=</span> <span class="s">@"cat"</span><span class="p">;</span>
    <span class="n">minTransaction</span><span class="p">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">minTransaction</span><span class="p">.</span><span class="n">tax_amount</span> <span class="o">=</span> <span class="mi">1111</span><span class="p">;</span>
    <span class="n">transaction</span><span class="p">.</span><span class="n">microTransaction</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableArray</span> <span class="nf">arrayWithObject</span><span class="p">:</span><span class="n">minTransaction</span><span class="p">];</span>
</code></pre><pre class="highlight swift tab-swift"><code>        <span class="k">let</span> <span class="nv">transaction</span><span class="p">:</span><span class="kt">ABTransaction</span> <span class="o">=</span> <span class="kt">ABTransaction</span><span class="p">(</span><span class="nv">abTracking</span><span class="p">:</span> <span class="kt">ABDeviceType</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span> <span class="nv">longtitude</span><span class="p">:</span> <span class="mf">2.33</span><span class="p">,</span> <span class="nv">latitude</span><span class="p">:</span> <span class="mf">48.33</span><span class="p">,</span> <span class="nv">ipAdress</span><span class="p">:</span><span class="s">"192.168.1.1"</span><span class="p">,</span> <span class="nv">interfaceName</span><span class="p">:</span> <span class="s">"ABHomeViewController"</span><span class="p">)</span>

        <span class="n">transaction</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"transaction"</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">transaction_id</span> <span class="o">=</span> <span class="s">"revenue"</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">revenue</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">shipping</span> <span class="o">=</span> <span class="mi">12</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">tax_total</span> <span class="o">=</span> <span class="mf">0.23</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">discount</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">payment_method</span> <span class="o">=</span> <span class="s">"PayPal"</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">currencyName</span> <span class="o">=</span> <span class="s">"currency_name"</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">currencyRate</span> <span class="o">=</span> <span class="mf">0.222</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">items_count</span> <span class="o">=</span> <span class="mi">12</span>
        <span class="c1">// Set micro transaction</span>
        <span class="k">let</span> <span class="nv">miniTransaction</span><span class="p">:</span><span class="kt">ABMicroTransaction</span> <span class="o">=</span> <span class="kt">ABMicroTransaction</span><span class="p">()</span>
        <span class="n">miniTransaction</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"name"</span>
        <span class="n">miniTransaction</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="mi">12</span>
        <span class="n">miniTransaction</span><span class="o">.</span><span class="n">sku</span> <span class="o">=</span> <span class="s">"sku"</span>
        <span class="n">miniTransaction</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="s">"cat"</span>
        <span class="n">miniTransaction</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">miniTransaction</span><span class="o">.</span><span class="n">tax_amount</span> <span class="o">=</span> <span class="mi">1111</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">microTransaction</span> <span class="o">=</span> <span class="p">[</span><span class="n">miniTransaction</span><span class="p">];</span>
        <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">sendTrackingEvent</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
</code></pre>
<p>The <code>ABTransaction</code> lets you track any purchase on your mobile app.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Label of the Transaction as displayed in the reporting.<strong>required</strong></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string</td>
<td>Unique identifier of the transaction.<strong>required</strong></td>
</tr>
<tr>
<td>revenue</td>
<td>int</td>
<td>Total amount of money spent by the visitor expressed in cents. <strong>required</strong></td>
</tr>
<tr>
<td>shipping</td>
<td>int</td>
<td>Shipping cost - expressed in cents.<strong>required</strong></td>
</tr>
<tr>
<td>tax_total</td>
<td>int</td>
<td>Total tax expressed in cents. <strong>optional</strong></td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td>Â Means of payment. <strong>optional</strong></td>
</tr>
<tr>
<td>items_count</td>
<td>int</td>
<td>Total number of products purchased on the mobile app. <strong>optional</strong></td>
</tr>
<tr>
<td>currencyName</td>
<td>string</td>
<td>Name of the money used for the payment. <strong>required</strong></td>
</tr>
<tr>
<td>currencyRate</td>
<td>float</td>
<td>Change rate between USD in cents (used as a reference) and the money used for the payment. <strong>required</strong></td>
</tr>
<tr>
<td>microTransaction</td>
<td>ABMicroTransaction</td>
<td>Products purchased on the web site/mobile app. <strong>optional</strong></td>
</tr>
</tbody></table>

<p><strong>ABMicroTransaction</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Label of the product.  <strong>required</strong></td>
</tr>
<tr>
<td>price</td>
<td>int</td>
<td>Price of the item expressed in cents.<strong>required</strong></td>
</tr>
<tr>
<td>sku</td>
<td>string</td>
<td>Identifier of the item. <strong>optional</strong></td>
</tr>
<tr>
<td>category</td>
<td>string</td>
<td>Category of product the item belongs to.</td>
</tr>
<tr>
<td>quantity</td>
<td>int</td>
<td>Number of identical products purchased at the same time on the mobile app. <strong>optional</strong></td>
</tr>
<tr>
<td>tax_amount</td>
<td>int</td>
<td>Tax amount applied to the item. <strong>optional</strong></td>
</tr>
<tr>
<td>tax_rate</td>
<td>float</td>
<td>Percentage of tax applied to the item. <strong>optional</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h2 id='visit-tracking'>Visit tracking</h2><pre class="highlight objective_c tab-objective_c"><code>
    <span class="n">ABVisitEvent</span> <span class="o">*</span> <span class="n">visitEvent</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ABVisitEvent</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initABTracking</span><span class="p">:</span><span class="n">ABMobile</span> <span class="nf">longtitude</span><span class="p">:</span><span class="mi">2</span><span class="p">.</span><span class="mi">33</span> <span class="n">latitude</span><span class="o">:</span><span class="mi">48</span><span class="p">.</span><span class="mi">33</span> <span class="n">ipAdress</span><span class="o">:</span><span class="s">@"192.168.1.1"</span> <span class="n">interfaceName</span><span class="o">:</span><span class="s">@"ABHomeViewController"</span><span class="p">];</span>

    <span class="p">[[</span><span class="n">ABTasty</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">sendTrackingEvent</span><span class="p">:</span><span class="n">visitEvent</span><span class="p">];</span>

</code></pre><pre class="highlight swift tab-swift"><code>     <span class="k">let</span> <span class="nv">visitEvent</span><span class="p">:</span><span class="kt">ABVisitEvent</span> <span class="o">=</span> <span class="kt">ABVisitEvent</span><span class="p">(</span><span class="nv">abTracking</span><span class="p">:</span> <span class="kt">ABDeviceType</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span> <span class="nv">longtitude</span><span class="p">:</span> <span class="mf">2.33</span><span class="p">,</span> <span class="nv">latitude</span><span class="p">:</span> <span class="mf">48.33</span><span class="p">,</span> <span class="nv">ipAdress</span><span class="p">:</span><span class="s">"192.168.1.1"</span><span class="p">,</span> <span class="nv">interfaceName</span><span class="p">:</span> <span class="s">"ABHomeViewController"</span><span class="p">)</span>

     <span class="kt">ABTasty</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">sendTrackingEvent</span><span class="p">(</span><span class="n">visitEvent</span><span class="p">)</span>
</code></pre>
<p>The <code>ABVisitEvent</code> lets you track any visit occurring on a mobile app.</p>

<p>No parameters needed for this event, the sdk handle it for you, it take the <code>common data</code> set before when start SDK, if you want to update the common tracking for this specefic visit event, create un instance with <code>initABTracking</code>.
<br></p>
<h1 id='reference'>Reference</h1>
<p><a href="http://sdk.abtasty.com/android/ref/abtastysdk/index.html">Reference</a></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="objective_c">objective_c</a>
                <a href="#" data-language-name="swift">swift</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
