
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>librarybyapi documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;kotlin&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="kotlin">kotlin</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#welcome" class="toc-h1 toc-link" data-title="welcome">Welcome</a>
          </li>
          <li>
            <a href="#app-prerequisites" class="toc-h1 toc-link" data-title="app-prerequisites">App prerequisites</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="getting-started">Getting started</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#cocoapods" class="toc-h2 toc-link" data-title="cocoapods">Cocoapods</a>
                  </li>
                  <li>
                    <a href="#manual-installation" class="toc-h2 toc-link" data-title="manual-installation">Manual Installation</a>
                  </li>
                  <li>
                    <a href="#initialize-abtastysdk" class="toc-h2 toc-link" data-title="initialize-abtastysdk">Initialize ABTastySDK</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#experiments" class="toc-h1 toc-link" data-title="experiments">Experiments</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#library-initialization" class="toc-h2 toc-link" data-title="library-initialization">Library Initialization</a>
                  </li>
                  <li>
                    <a href="#allocate-variations" class="toc-h2 toc-link" data-title="allocate-variations">Allocate variations</a>
                  </li>
                  <li>
                    <a href="#activate-campaign" class="toc-h2 toc-link" data-title="activate-campaign">Activate Campaign</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sending-events" class="toc-h1 toc-link" data-title="sending-events">Sending events</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#abtracker" class="toc-h2 toc-link" data-title="abtracker">ABTracker</a>
                  </li>
                  <li>
                    <a href="#campaign-activation-tracking" class="toc-h2 toc-link" data-title="campaign-activation-tracking">Campaign Activation Tracking</a>
                  </li>
                  <li>
                    <a href="#action-tracking" class="toc-h2 toc-link" data-title="action-tracking">Action Tracking</a>
                  </li>
                  <li>
                    <a href="#custom-tracking" class="toc-h2 toc-link" data-title="custom-tracking">Custom Tracking</a>
                  </li>
                  <li>
                    <a href="#transaction-tracking" class="toc-h2 toc-link" data-title="transaction-tracking">Transaction tracking</a>
                  </li>
                  <li>
                    <a href="#visit-tracking" class="toc-h2 toc-link" data-title="visit-tracking">Visit tracking</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#reference" class="toc-h1 toc-link" data-title="reference">Reference</a>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='welcome'>Welcome</h1>
<p>Welcome to the AB Tasty for app <strong>ABTastySdk</strong> documentation!</p>

<p>The ABTastySDK project is an iOS Framework that helps you to make server side tests on your native iOS app.</p>

<p>You can use this FrameWork to access AB Tasty endpoints, which can generate a unique visitor ID, allocate a visitor to a test, and push visits and conversions events in order to help you analyze the outcomes of your campaigns.</p>

<p>Should you have any question about this documentation, feel free to <a href="mailto:contact@abtastycom">reach out to us</a>.</p>
<h1 id='app-prerequisites'>App prerequisites</h1>
<ul>
<li><p>Your app must be a native app written in Swift or Objective C.</p></li>
<li><p>ABTastySdk support minimum ios 8.0+</p></li>
</ul>
<h1 id='getting-started'>Getting started</h1>
<p>ABtastySDK is available through Pods and manual installation.</p>
<h3 id='cocoapods'>Cocoapods</h3>
<ol>
<li><p><a href='https://guides.cocoapods.org/'>Install CocoaPods.</a></p></li>
<li><p>Open Terminal and navigate to the directory that contains your project then enter the folowing command: pod init</p></li>
<li><p>Open your Podfile and add the ABTAstySdk pod</p></li>
<li><p>Run pod install from your Xcode project&#39;s base directory</p></li>
<li><p>Make sure to always open the Xcode workspace instead of the project file when building your project</p></li>
</ol>

<p><br></p>
<h3 id='manual-installation'>Manual Installation</h3>
<ol>
<li><p>Download the frameWork  <a href='ABTastySdk.framework'>Install CocoaPods.</a></p></li>
<li><p>In Finder, navigate to the ABTastySdk.framework file and drop it under your &quot;Embedded Binaries&quot; section in Xcode</p></li>
<li><p>After this manipulation, a popup will open, into it, don&#39;t forget to check &quot;Copy items if needed&quot;.</p></li>
</ol>

<p><code>com.abtasty:librarybyapi:x.x.x</code></p>

<aside class="notice">
Replace <code>x.x.x</code> with the desired version.
</aside>

<p><br>
<aside class="warning">
Warning : As the librarybyapi contains few methods it depends on other libraries to build properly. You will sometimes need to enable the multidex option in case your app dex file exceeds 65K methods. Follow this link : <a href="https://developer.android.com/studio/build/multidex.html">Multidex</a>
</aside></p>

<p><br></p>
<h3 id='initialize-abtastysdk'>Initialize ABTastySDK</h3>
<blockquote>
<p>Call the function <em>initialize</em> and its inner function <em>start</em> from the class <em>ABTasty</em> to init and start the library</p>
</blockquote>
<pre class="highlight kotlin tab-kotlin"><code><span class="kd">class</span> <span class="nc">MyActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">()</span> <span class="p">{</span>

<span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
<span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
<span class="n">ABTasty</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="n">AB_TASTY_KEY</span><span class="p">).</span><span class="n">start</span><span class="p">()</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>

<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">AB_TASTY_KEY</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>Finally, you just have to call the <code>initialize</code> function and its inner <code>start</code> function located in the <code>ABTasty</code> class. Insert it at the most appropriate location for your application to init and start the library.</p>

<p><code>fun initialize(context: Context, token: String) : ABInitializer</code></p>

<p><em>@See: Initalization section for more details</em></p>

<aside class="notice">
Replace <code>AB_TASTY_KEY</code> with the key provided by AB Tasty.
</aside>

<p><br><br></p>

<aside class="success">
Congratulations !!
<br><br>
You should know be able to use the AB Tasty librarybyapi :)
</aside>
<h1 id='experiments'>Experiments</h1>
<p>This section of the documentation aims at helping you starting a new campaign in your app with the ABTasty android librarybyapi.</p>
<h2 id='library-initialization'>Library Initialization</h2>
<p>The first thing to do is to initialize the library. To do so, you just call the <code>initialize</code> function in the <code>ABTasty</code> class located in the <code>com.abtasty.librarybyapi.main</code> package.
For each new user, at the very first initialization, the library requests for a new visitor id to our servers and save it in a database.</p>

<p><br></p>
<h3 id='initialize'>Initialize</h3><pre class="highlight kotlin tab-kotlin"><code><span class="kd">class</span> <span class="nc">MyActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">()</span> <span class="p">{</span>

<span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
<span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

<span class="n">ABTasty</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="n">AB_TASTY_KEY</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
<span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">AB_TASTY_KEY</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p><code>fun initialize(context: Context, token: String) : ABInitializer</code></p>

<p>This function is the main library initializer.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>context</td>
<td>Context</td>
<td>Application context of your app.</td>
</tr>
<tr>
<td>token</td>
<td>String</td>
<td>Access key provided by AB Tasty</td>
</tr>
</tbody></table>

<p><br></p>

<aside class="notice">
This function returns an `ABInitializer` builder object in which you can pass some of the following initialization configurations methods. Then call `start` to build and start the library with the given configuration.
</aside>

<p><br></p>
<h3 id='initialize-with-campaign-ids'>Initialize with campaign Ids</h3><pre class="highlight kotlin tab-kotlin"><code><span class="kd">class</span> <span class="nc">MyActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">()</span> <span class="p">{</span>

<span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
<span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">campaigns</span> <span class="p">=</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;(</span><span class="n">arrayOf</span><span class="p">(</span><span class="s">"111111"</span><span class="p">,</span> <span class="s">"222222"</span><span class="p">).</span><span class="n">asList</span><span class="p">())</span>

<span class="n">ABTasty</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="n">AB_TASTY_KEY</span><span class="p">)</span>
<span class="p">.</span><span class="n">withCampaignIds</span><span class="p">(</span><span class="n">campaigns</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
<span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

<span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">campaigns</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"111111"</span><span class="o">,</span> <span class="s">"222222"</span><span class="o">));</span>

<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">AB_TASTY_KEY</span><span class="o">)</span>
<span class="o">.</span><span class="na">withCampaignIds</span><span class="o">(</span><span class="n">campaigns</span><span class="o">)</span>
<span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p><code>fun withCampaignIds(campaignIds: ArrayList&lt;String&gt;) : ABInitializer</code></p>

<p>This method lets you to set preloaded campaing ids so the library allocates all the campaigns variations at initialization time. Then all these campaigns will be available when the sdk is ready.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>campaignIds</td>
<td>ArrayList<String></td>
<td>ArrayList<String> of ids of the desired campaigns.</td>
</tr>
</tbody></table>

<p><br></p>
<h3 id='initialize-with-tracking-data'>Initialize with tracking data</h3><pre class="highlight kotlin tab-kotlin"><code><span class="kd">class</span> <span class="nc">MyActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">()</span> <span class="p">{</span>

<span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
<span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

<span class="n">ABTasty</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="n">AB_TASTY_KEY</span><span class="p">)</span>
<span class="p">.</span><span class="n">withTrackingData</span><span class="p">(</span><span class="n">ABTracker</span><span class="p">.</span><span class="n">Builder</span><span class="p">().</span><span class="n">setDeviceType</span><span class="p">(</span><span class="n">DeviceType</span><span class="p">.</span><span class="n">MOBILE_PHONE</span><span class="p">).</span><span class="n">build</span><span class="p">())</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
<span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">AB_TASTY_KEY</span><span class="o">)</span>
<span class="o">.</span><span class="na">withTrackingData</span><span class="o">(</span><span class="k">new</span> <span class="n">ABTracker</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">setDeviceType</span><span class="o">(</span><span class="n">DeviceType</span><span class="o">.</span><span class="na">MOBILE_PHONE</span><span class="o">).</span><span class="na">build</span><span class="o">())</span>
<span class="o">.</span><span class="na">start</span><span class="o">();</span>

<span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p><code>fun withTrackingData(tracker : ABTracker) : ABInitializer</code></p>

<p>This method lets you set default common tracking data to be shared between all your events.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tracker</td>
<td>ABTracker</td>
<td>Tracker with default common data</td>
</tr>
</tbody></table>

<p><br></p>
<h3 id='initialize-with-ready'>Initialize with ready</h3><pre class="highlight kotlin tab-kotlin"><code><span class="kd">class</span> <span class="nc">MyActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">()</span> <span class="p">{</span>

<span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
<span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

<span class="n">ABTasty</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="n">AB_TASTY_KEY</span><span class="p">)</span>
<span class="p">.</span><span class="n">withWhenReady</span> <span class="p">{</span>
<span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"&gt; READY"</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
<span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">AB_TASTY_KEY</span><span class="o">)</span>
<span class="o">.</span><span class="na">withWhenReady</span><span class="o">(</span><span class="k">new</span> <span class="n">Function0</span><span class="o">&lt;</span><span class="n">Unit</span><span class="o">&gt;()</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Unit</span> <span class="nf">invoke</span><span class="o">()</span> <span class="o">{</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&gt; READY"</span><span class="o">);</span>
<span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">})</span>
<span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p><code>withWhenReady(lambda: () -&gt; Unit) : ABInitializer</code></p>

<p>As the sdk is asynchronous and run in parallel, this method lets you set a lambda which is going to be executed when the library is ready.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>lambda</td>
<td>lambda</td>
<td>Lambda that is going to be invoked when the library has finished initializing.</td>
</tr>
</tbody></table>

<p><br></p>
<h3 id='initialize-with-logs'>Initialize with logs</h3><pre class="highlight kotlin tab-kotlin"><code><span class="kd">class</span> <span class="nc">MyActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">()</span> <span class="p">{</span>

<span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
<span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

<span class="n">ABTasty</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="n">AB_TASTY_KEY</span><span class="p">)</span>
<span class="p">.</span><span class="n">withLogMode</span><span class="p">(</span><span class="n">LogMode</span><span class="p">.</span><span class="n">ALL</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
<span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">AB_TASTY_KEY</span><span class="o">)</span>
<span class="o">.</span><span class="na">withLogMode</span><span class="o">(</span><span class="n">LogMode</span><span class="o">.</span><span class="na">ALL</span><span class="o">)</span>
<span class="o">.</span><span class="na">start</span><span class="o">();</span>

<span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p><code>fun withLogMode(mode : LogMode) : ABInitializer</code></p>

<p>This method aims at enabling logs from the library.</p>

<p>It can be one of the following (NONE by default) :</p>

<ul>
<li>ALL</li>
<li>NONE</li>
<li>VERBOSE</li>
<li>ERROR</li>
</ul>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mode</td>
<td>LogMode(Enum)</td>
<td>The log mode enum to enable</td>
</tr>
</tbody></table>

<p><br></p>
<h3 id='initialize-with-onerror'>Initialize with onError</h3><pre class="highlight kotlin tab-kotlin"><code><span class="kd">class</span> <span class="nc">MyActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">()</span> <span class="p">{</span>

<span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
<span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

<span class="n">ABTasty</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="n">AB_TASTY_KEY</span><span class="p">)</span>
<span class="p">.</span><span class="n">withOnError</span> <span class="p">{</span> <span class="n">tag</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">String</span> <span class="p">-&gt;</span>
<span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"&gt; ERROR : $tag - $message"</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
<span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">AB_TASTY_KEY</span><span class="o">)</span>
<span class="o">.</span><span class="na">withOnError</span><span class="o">(</span><span class="k">new</span> <span class="n">Function2</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">,</span> <span class="n">Unit</span><span class="o">&gt;()</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Unit</span> <span class="nf">invoke</span><span class="o">(</span><span class="n">String</span> <span class="n">tag</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&gt; ERROR : "</span> <span class="o">+</span> <span class="n">tag</span> <span class="o">+</span> <span class="s">" - "</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span>
<span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">})</span>
<span class="o">.</span><span class="na">start</span><span class="o">();</span>

<span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p><code>fun withOnError(lambda: (tag:String, message:String) -&gt; Unit) : ABInitializer</code></p>

<p>This method lets you set a lambda which is going to be executed if an error occurs with the tag and the message as a parameters.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>lambda</td>
<td>lambda</td>
<td>Lambda that is going to be invoked if an error occurs associated with a tag and an error message.</td>
</tr>
</tbody></table>

<p><br></p>
<h3 id='start'>Start</h3><pre class="highlight kotlin tab-kotlin"><code><span class="kd">class</span> <span class="nc">MyActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">()</span> <span class="p">{</span>

<span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
<span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">campaigns</span> <span class="p">=</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;(</span><span class="n">arrayOf</span><span class="p">(</span><span class="s">"111111"</span><span class="p">,</span> <span class="s">"222222"</span><span class="p">).</span><span class="n">asList</span><span class="p">())</span>

<span class="n">ABTasty</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="n">AB_TASTY_KEY</span><span class="p">)</span>
<span class="p">.</span><span class="n">withCampaignIds</span><span class="p">(</span><span class="n">campaigns</span><span class="p">)</span>
<span class="p">.</span><span class="n">withWhenReady</span> <span class="p">{</span>
<span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"&gt; READY"</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">.</span><span class="n">withTrackingData</span><span class="p">(</span><span class="n">ABTracker</span><span class="p">.</span><span class="n">Builder</span><span class="p">().</span><span class="n">setDeviceType</span><span class="p">(</span><span class="n">DeviceType</span><span class="p">.</span><span class="n">MOBILE_PHONE</span><span class="p">).</span><span class="n">build</span><span class="p">())</span>
<span class="p">.</span><span class="n">withLogMode</span><span class="p">(</span><span class="n">LogMode</span><span class="p">.</span><span class="n">ALL</span><span class="p">)</span>
<span class="p">.</span><span class="n">withOnError</span> <span class="p">{</span> <span class="n">tag</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">String</span> <span class="p">-&gt;</span>
<span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"&gt; ERROR : $tag - $message"</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">.</span><span class="n">start</span><span class="p">()</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
<span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

<span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">campaigns</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"111111"</span><span class="o">,</span> <span class="s">"222222"</span><span class="o">));</span>

<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">AB_TASTY_KEY</span><span class="o">)</span>
<span class="o">.</span><span class="na">withCampaignIds</span><span class="o">(</span><span class="n">campaigns</span><span class="o">)</span>
<span class="o">.</span><span class="na">withWhenReady</span><span class="o">(</span><span class="k">new</span> <span class="n">Function0</span><span class="o">&lt;</span><span class="n">Unit</span><span class="o">&gt;()</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Unit</span> <span class="nf">invoke</span><span class="o">()</span> <span class="o">{</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&gt; READY"</span><span class="o">);</span>
<span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">})</span>
<span class="o">.</span><span class="na">withTrackingData</span><span class="o">(</span><span class="k">new</span> <span class="n">ABTracker</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">setDeviceType</span><span class="o">(</span><span class="n">DeviceType</span><span class="o">.</span><span class="na">MOBILE_PHONE</span><span class="o">).</span><span class="na">build</span><span class="o">())</span>
<span class="o">.</span><span class="na">withLogMode</span><span class="o">(</span><span class="n">LogMode</span><span class="o">.</span><span class="na">ALL</span><span class="o">)</span>
<span class="o">.</span><span class="na">withOnError</span><span class="o">(</span><span class="k">new</span> <span class="n">Function2</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">,</span> <span class="n">Unit</span><span class="o">&gt;()</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Unit</span> <span class="nf">invoke</span><span class="o">(</span><span class="n">String</span> <span class="n">tag</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&gt; ERROR : "</span> <span class="o">+</span> <span class="n">tag</span> <span class="o">+</span> <span class="s">" - "</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span>
<span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">})</span>
<span class="o">.</span><span class="na">start</span><span class="o">();</span>

<span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p><code>fun start()</code></p>

<p>The <code>start</code> method builds the <code>ABInitializer</code> config and starts the initialization of the library.</p>
<h2 id='allocate-variations'>Allocate variations</h2><pre class="highlight kotlin tab-kotlin"><code><span class="n">ABTasty</span><span class="p">.</span><span class="n">getVariationIdForCampaign</span><span class="p">(</span><span class="s">"xxxxxx"</span><span class="p">,</span> <span class="p">{</span>
<span class="k">when</span> <span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
<span class="s">"aaaaaa"</span> <span class="p">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="err">'</span><span class="n">Variation</span> <span class="n">A</span><span class="err">'</span><span class="p">)</span>
<span class="s">"bbbbbb"</span> <span class="p">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="err">'</span><span class="n">Variation</span> <span class="n">B</span><span class="err">'</span><span class="p">)</span>
<span class="o">..</span><span class="p">.</span>
<span class="p">}</span>
<span class="p">})</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">getVariationIdForCampaign</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">,</span> <span class="k">new</span> <span class="n">Function1</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Unit</span><span class="o">&gt;()</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Unit</span> <span class="nf">invoke</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
<span class="k">switch</span> <span class="o">(</span><span class="n">s</span><span class="o">)</span> <span class="o">{</span>
<span class="k">case</span> <span class="s">"aaaaaa"</span> <span class="o">:</span> <span class="o">{</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Variation A"</span><span class="o">);</span>
<span class="o">}</span> <span class="k">break</span><span class="o">;</span>
<span class="k">case</span> <span class="s">"bbbbbb"</span> <span class="o">:</span> <span class="o">{</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Variation B"</span><span class="o">);</span>
<span class="o">}</span> <span class="k">break</span><span class="o">;</span>
<span class="o">}</span>
<span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">});</span>
</code></pre>
<p>Once the library is initialized you need to allocate a variation id to your campaign. To do this, use the <code>getVariationIdForCampaign</code> method in the <code>ABTasty</code> class located in the <code>com.abtasty.librarybyapi.main</code> package.</p>

<p><code>fun getVariationIdForCampaign(campaignId: String, lambda: (variationId: String?) -&gt; Unit)</code></p>

<p>It uses the campaign id and a lambda as parameters which is going to be invoked when a variation is allocated to this campaign.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>campaignId</td>
<td>String</td>
<td>id of the campaign</td>
</tr>
<tr>
<td>lambda</td>
<td>lambda : (variationId: String?) -&gt; Unit</td>
<td>code to be invoked when a variation is selected for this campaign. The selected variation will be given as a parameter.</td>
</tr>
</tbody></table>

<aside class="notice">
Replace <code>xxxxxx</code> with the id of your campaign and, <code>aaaaaa</code> and <code>bbbbbb</code> with the different variations id of your campaign.
</aside>
<h2 id='activate-campaign'>Activate Campaign</h2>
<p>Once a variation has been allocated to a campaign you need to activate it. This way it tells AB Tasty that the current user saw this specific variation of the campaign so that the user
always sees the same variation.</p>

<p>The allocation can be changeg if you call <code>getVariationIdForCampaign</code> several times until you use <code>ABCampaignActivationTracker</code> to activate the campaign and freeze the variation.</p>

<p><em>@See <code>ABCampaignActivationTracker</code> in the <a href="#activate">tracking section</a></em></p>
<h1 id='sending-events'>Sending events</h1>
<p>The library also provides some functions to send events to ABTasty, for example to send objectives configured for a campaign.</p>

<p>To do so, use the <code>sendTrackingEvent</code> method and specify the expected tracker as a parameter.</p>

<p>All existing trackers are listed below.</p>

<p>Each tracker contains a <code>Builder</code> class that facilitates its build.</p>

<p><br></p>
<h2 id='abtracker'>ABTracker</h2>
<p>ABTracker is the generic tracker that contains common data and from which all others trackers inherit.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device_type</td>
<td>DeviceType</td>
<td>Device used by the visitor to view the test. The devices currently supported  are: <code>&quot;DESKTOP&quot;</code>, <code>&quot;MOBILE&quot;</code>, <code>&quot;TABLET&quot;</code>, <code>&quot;CAMERA&quot;</code>, <code>&quot;TV&quot;</code>, <code>&quot;GAMES_CONSOLE&quot;</code>, <code>&quot;PAYMENT_TERMINAL&quot;</code>, <code>&quot;WRISTWATCH&quot;</code>, and <code>&quot;OTHER&quot;</code>. <strong>required</strong></td>
</tr>
<tr>
<td>timestamp</td>
<td>Long</td>
<td>timestamp of the event <strong>required</strong></td>
</tr>
<tr>
<td>origin</td>
<td>String</td>
<td>interface or page from where the event has been created <strong>required</strong></td>
</tr>
<tr>
<td>geoPoint</td>
<td>DoubleArray</td>
<td> Current latitude / longitude of the device for geolocation [-90:90][-180:180] <strong>optional</strong></td>
</tr>
<tr>
<td>ip</td>
<td>String</td>
<td>current ip of the device <strong>optional</strong></td>
</tr>
<tr>
<td>deviceResolution</td>
<td>IntArray</td>
<td>current screen resolution of the device <strong>optional</strong> (<strong>required</strong> for ABActionTracking Touch)</td>
</tr>
</tbody></table>

<aside class="notice">
Common data can be automatically set from the tracker passed in the `ABInitializer` which is returned from the `initialize function`, or from another shared ABTracker instance.
</aside>

<aside class="warning">
We strongly recommend to set the `timestamp` parameter everytime you post asynchronous events in order to ensure data consistency.
</aside>

<aside class="notice">
the `device_type`, `timestamp`, `deviceResolution` parameters can be set automatically if not configured.
</aside>

<p><br></p>

<p><a name="activate"></a></p>
<h2 id='campaign-activation-tracking'>Campaign Activation Tracking</h2><pre class="highlight kotlin tab-kotlin"><code><span class="kd">val</span> <span class="py">tracker</span> <span class="p">=</span> <span class="n">ABCampaignActivationTracker</span><span class="p">.</span><span class="n">Builder</span><span class="p">()</span>
<span class="p">.</span><span class="n">setCampaignId</span><span class="p">(</span><span class="s">"xxxxxx"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setVariationId</span><span class="p">(</span><span class="s">"bbbbbbb"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setOrigin</span><span class="p">(</span><span class="s">"LoginActivity"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setDeviceType</span><span class="p">(</span><span class="n">DeviceType</span><span class="p">.</span><span class="n">MOBILE_PHONE</span><span class="p">)</span>
<span class="p">.</span><span class="n">setTimestamp</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="n">currentTimeMillis</span><span class="p">()</span> <span class="p">/</span> <span class="m">1000</span><span class="p">)</span>
<span class="p">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">ABTasty</span><span class="p">.</span><span class="n">sendTrackingEvent</span><span class="p">(</span><span class="n">tracker</span><span class="p">)</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">ABCampaignActivationTracker</span> <span class="n">activation</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ABCampaignActivationTracker</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
<span class="o">.</span><span class="na">setCampaignId</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setVariationId</span><span class="o">(</span><span class="s">"bbbbbb"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setOrigin</span><span class="o">(</span><span class="s">"LoginActivity"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setDeviceType</span><span class="o">(</span><span class="n">DeviceType</span><span class="o">.</span><span class="na">MOBILE_PHONE</span><span class="o">)</span>
<span class="o">.</span><span class="na">setTimestamp</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">)</span>
<span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">sendTrackingEvent</span><span class="o">(</span><span class="n">activation</span><span class="o">);</span>
</code></pre>
<p>This tracker activates a campaign and its variation.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>campaign_id</td>
<td>String</td>
<td>campaign id to be activated <strong>required</strong></td>
</tr>
<tr>
<td>variation_id</td>
<td>String</td>
<td>variation id of the campaign to be activated <strong>required</strong></td>
</tr>
</tbody></table>

<aside class="notice">
Replace <code>xxxxxx</code> with the id of your campaign and <code>bbbbbb</code> with the selected variations id of your campaign.
</aside>

<p><br></p>
<h2 id='action-tracking'>Action Tracking</h2><pre class="highlight kotlin tab-kotlin"><code><span class="kd">val</span> <span class="py">tracker</span> <span class="p">=</span> <span class="n">ABActionTracker</span><span class="p">.</span><span class="n">Builder</span><span class="p">()</span>
<span class="p">.</span><span class="n">setActionType</span><span class="p">(</span><span class="n">ABActionTracker</span><span class="p">.</span><span class="n">ActionType</span><span class="p">.</span><span class="n">TOUCH</span><span class="p">)</span>
<span class="p">.</span><span class="n">setName</span><span class="p">(</span><span class="s">"nb_fingers_touch"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
<span class="p">.</span><span class="n">setOrigin</span><span class="p">(</span><span class="s">"PictureActivity"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setDeviceResolution</span><span class="p">(</span><span class="n">intArrayOf</span><span class="p">(</span><span class="m">1080</span><span class="p">,</span> <span class="m">1920</span><span class="p">))</span>
<span class="p">.</span><span class="n">setTouchPosition</span><span class="p">(</span><span class="n">intArrayOf</span><span class="p">(</span><span class="m">347</span><span class="p">,</span> <span class="m">887</span><span class="p">))</span>
<span class="p">.</span><span class="n">setDeviceType</span><span class="p">(</span><span class="n">DeviceType</span><span class="p">.</span><span class="n">MOBILE_PHONE</span><span class="p">)</span>
<span class="p">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">ABTasty</span><span class="p">.</span><span class="n">sendTrackingEvent</span><span class="p">(</span><span class="n">tracker</span><span class="p">)</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">ABActionTracker</span> <span class="n">tracker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ABActionTracker</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
<span class="o">.</span><span class="na">setActionType</span><span class="o">(</span><span class="n">ABActionTracker</span><span class="o">.</span><span class="na">ActionType</span><span class="o">.</span><span class="na">TOUCH</span><span class="o">)</span>
<span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"nb_fingers_touch"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
<span class="o">.</span><span class="na">setOrigin</span><span class="o">(</span><span class="s">"PictureActivity"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setDeviceResolution</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span> <span class="mi">1080</span><span class="o">,</span> <span class="mi">1920</span><span class="o">})</span>
<span class="o">.</span><span class="na">setTouchPosition</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span><span class="mi">347</span><span class="o">,</span> <span class="mi">887</span><span class="o">})</span>
<span class="o">.</span><span class="na">setDeviceType</span><span class="o">(</span><span class="n">DeviceType</span><span class="o">.</span><span class="na">MOBILE_PHONE</span><span class="o">)</span>
<span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">sendTrackingEvent</span><span class="o">(</span><span class="n">tracker</span><span class="o">);</span>
</code></pre>
<p>This tracker sends a click or a touch event</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td>Label of the click tracking/touch as displayed in the reporting. <strong>required</strong></td>
</tr>
<tr>
<td>type</td>
<td>ActionType</td>
<td>Type of event CLICK or TOUCH <strong>required</strong></td>
</tr>
<tr>
<td>value_string</td>
<td>String</td>
<td>String value attached to the action tracking event. <strong>optional</strong></td>
</tr>
<tr>
<td>value_interger</td>
<td>Integer</td>
<td>Integer value attached to the action tracking event.<strong>optional</strong></td>
</tr>
<tr>
<td>position</td>
<td>IntArray</td>
<td>Object that contains the position x/y where the touch occurred in the mobile page. <strong>required for TOUCH</strong></td>
</tr>
<tr>
<td>resolution</td>
<td>IntArray</td>
<td>Object that contains the resolution in w/h of the screen where the touch occurred. <strong>required for TOUCH</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h2 id='custom-tracking'>Custom Tracking</h2><pre class="highlight kotlin tab-kotlin"><code><span class="kd">val</span> <span class="py">tracker</span> <span class="p">=</span> <span class="n">ABCustomEventTracker</span><span class="p">.</span><span class="n">Builder</span><span class="p">()</span>
<span class="p">.</span><span class="n">setName</span><span class="p">(</span><span class="s">"nb_connection"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">"3"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setDeviceType</span><span class="p">(</span><span class="n">DeviceType</span><span class="p">.</span><span class="n">MOBILE_PHONE</span><span class="p">)</span>
<span class="p">.</span><span class="n">setOrigin</span><span class="p">(</span><span class="s">"LoginActivity"</span><span class="p">)</span>
<span class="p">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">ABTasty</span><span class="p">.</span><span class="n">sendTrackingEvent</span><span class="p">(</span><span class="n">tracker</span><span class="p">)</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">ABCustomEventTracker</span> <span class="n">tracker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ABCustomEventTracker</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
<span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"nb_connection"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"3"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setDeviceType</span><span class="o">(</span><span class="n">DeviceType</span><span class="o">.</span><span class="na">MOBILE_PHONE</span><span class="o">)</span>
<span class="o">.</span><span class="na">setOrigin</span><span class="o">(</span><span class="s">"LoginActivity"</span><span class="o">)</span>
<span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">sendTrackingEvent</span><span class="o">(</span><span class="n">tracker</span><span class="o">);</span>
</code></pre>
<p>This tracker sends a custom event and lets you track events that are specific to your business.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td>Label of the click tracking/touch as displayed in the reporting. <strong>required</strong></td>
</tr>
<tr>
<td>type</td>
<td>ActionType</td>
<td>Type of event CLICK or TOUCH <strong>required</strong></td>
</tr>
<tr>
<td>value_string</td>
<td>String</td>
<td>String value attached to the action tracking event. <strong>optional</strong></td>
</tr>
<tr>
<td>value_integer</td>
<td>Integer</td>
<td>Integer value attached to the action tracking event.<strong>optional</strong></td>
</tr>
<tr>
<td>position</td>
<td>IntArray</td>
<td>Object that contains the position x/y where the touch occurred in the mobile page. <strong>required for TOUCH</strong></td>
</tr>
<tr>
<td>resolution</td>
<td>IntArray</td>
<td>Object that contains the resolution in w/h of the screen where the touch occurred. <strong>required for TOUCH</strong></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Label of the click tracked as displayed in the reporting. <strong>required</strong></td>
</tr>
<tr>
<td>value_string</td>
<td>string</td>
<td>String value attached to the action tracking event. <strong>optional</strong></td>
</tr>
<tr>
<td>value_integer</td>
<td>int</td>
<td>Integer value attached to the action tracking event. <strong>optional</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h2 id='transaction-tracking'>Transaction tracking</h2><pre class="highlight kotlin tab-kotlin"><code><span class="kd">val</span> <span class="py">item</span> <span class="p">=</span> <span class="n">ABTransactionTracker</span><span class="p">.</span><span class="n">Item</span><span class="p">.</span><span class="n">Builder</span><span class="p">()</span>
<span class="p">.</span><span class="n">setName</span><span class="p">(</span><span class="s">"Android home"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setPrice</span><span class="p">(</span><span class="m">100</span><span class="p">)</span>
<span class="p">.</span><span class="n">build</span><span class="p">()</span>

<span class="kd">val</span> <span class="py">tracker</span> <span class="p">=</span> <span class="n">ABTransactionTracker</span><span class="p">.</span><span class="n">Builder</span><span class="p">()</span>
<span class="p">.</span><span class="n">setName</span><span class="p">(</span><span class="s">"purchase"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setTransactionId</span><span class="p">(</span><span class="s">"#587837983"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setRevenue</span><span class="p">(</span><span class="m">10000</span><span class="p">)</span>
<span class="p">.</span><span class="n">setShipping</span><span class="p">(</span><span class="m">1999</span><span class="p">)</span>
<span class="p">.</span><span class="n">setOrigin</span><span class="p">(</span><span class="s">"Basketactivity"</span><span class="p">)</span>
<span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="p">.</span><span class="n">setDeviceType</span><span class="p">(</span><span class="n">DeviceType</span><span class="p">.</span><span class="n">MOBILE_PHONE</span><span class="p">)</span>
<span class="p">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">ABTasty</span><span class="p">.</span><span class="n">sendTrackingEvent</span><span class="p">(</span><span class="n">tracker</span><span class="p">)</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">Item</span> <span class="n">item</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ABTransactionTracker</span><span class="o">.</span><span class="na">Item</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
<span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Android home"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="mi">100</span><span class="o">)</span>
<span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="n">ABTransactionTracker</span> <span class="n">tracker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ABTransactionTracker</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
<span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"purchase"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setTransactionId</span><span class="o">(</span><span class="s">"#587837983"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setRevenue</span><span class="o">(</span><span class="mi">10000</span><span class="o">)</span>
<span class="o">.</span><span class="na">setShipping</span><span class="o">(</span><span class="mi">1999</span><span class="o">)</span>
<span class="o">.</span><span class="na">setOrigin</span><span class="o">(</span><span class="s">"Basketactivity"</span><span class="o">)</span>
<span class="o">.</span><span class="na">addItem</span><span class="o">(</span><span class="n">item</span><span class="o">)</span>
<span class="o">.</span><span class="na">setDeviceType</span><span class="o">(</span><span class="n">DeviceType</span><span class="o">.</span><span class="na">MOBILE_PHONE</span><span class="o">)</span>
<span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">sendTrackingEvent</span><span class="o">(</span><span class="n">tracker</span><span class="o">);</span>
</code></pre>
<p>The <code>ABTransactionTracker</code> lets you track any purchase on your mobile app.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Label of the Transaction as displayed in the reporting.<strong>required</strong></td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>Unique identifier of the transaction.<strong>required</strong></td>
</tr>
<tr>
<td>revenue</td>
<td>int</td>
<td>Total amount of money spent by the visitor expressed in cents. <strong>required</strong></td>
</tr>
<tr>
<td>shipping</td>
<td>int</td>
<td>Shipping cost - expressed in cents.<strong>required</strong></td>
</tr>
<tr>
<td>tax_total</td>
<td>int</td>
<td>Total tax expressed in cents. <strong>optional</strong></td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td> Means of payment. <strong>optional</strong></td>
</tr>
<tr>
<td>items_count</td>
<td>int</td>
<td>Total number of products purchased on the mobile app. <strong>optional</strong></td>
</tr>
<tr>
<td>currency</td>
<td>object</td>
<td>Money used for the payment. <strong>optional</strong></td>
</tr>
<tr>
<td>currency.name</td>
<td>string</td>
<td>Name of the money used for the payment. <strong>required</strong></td>
</tr>
<tr>
<td>currency.rate</td>
<td>float</td>
<td>Change rate between USD in cents (used as a reference) and the money used for the payment. <strong>required</strong></td>
</tr>
<tr>
<td>items</td>
<td>object</td>
<td>Products purchased on the web site/mobile app. <strong>optional</strong></td>
</tr>
<tr>
<td>items.name</td>
<td>string</td>
<td>Label of the product.  <strong>required</strong></td>
</tr>
<tr>
<td>items.price</td>
<td>int</td>
<td>Price of the item expressed in cents.<strong>required</strong></td>
</tr>
<tr>
<td>items.sku</td>
<td>string</td>
<td>Identifier of the item. <strong>optional</strong></td>
</tr>
<tr>
<td>items.category</td>
<td>string</td>
<td>Category of product the item belongs to.</td>
</tr>
<tr>
<td>items.quantity</td>
<td>int</td>
<td>Number of identical products purchased at the same time on the mobile app. <strong>optional</strong></td>
</tr>
<tr>
<td>items.tax_amount</td>
<td>int</td>
<td>Tax amount applied to the item. <strong>optional</strong></td>
</tr>
<tr>
<td>items.tax_rate</td>
<td>float</td>
<td>Percentage of tax applied to the item. <strong>optional</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h2 id='visit-tracking'>Visit tracking</h2><pre class="highlight kotlin tab-kotlin"><code><span class="kd">val</span> <span class="py">tracker</span> <span class="p">=</span> <span class="n">ABVisitTracker</span><span class="p">.</span><span class="n">Builder</span><span class="p">()</span>
<span class="p">.</span><span class="n">setOrigin</span><span class="p">(</span><span class="s">"VisitActivity"</span><span class="p">)</span>
<span class="p">.</span><span class="n">setDeviceType</span><span class="p">(</span><span class="n">DeviceType</span><span class="p">.</span><span class="n">TABLET</span><span class="p">)</span>
<span class="p">.</span><span class="n">setIp</span><span class="p">(</span><span class="s">"192.168.0.1"</span><span class="p">)</span>
<span class="p">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">ABTasty</span><span class="p">.</span><span class="n">sendTrackingEvent</span><span class="p">(</span><span class="n">tracker</span><span class="p">)</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">ABVisitTracker</span> <span class="n">tracker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ABVisitTracker</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
<span class="o">.</span><span class="na">setOrigin</span><span class="o">(</span><span class="s">"VisitActivity"</span><span class="o">)</span>
<span class="o">.</span><span class="na">setDeviceType</span><span class="o">(</span><span class="n">DeviceType</span><span class="o">.</span><span class="na">TABLET</span><span class="o">)</span>
<span class="o">.</span><span class="na">setIp</span><span class="o">(</span><span class="s">"192.168.0.1"</span><span class="o">)</span>
<span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">ABTasty</span><span class="o">.</span><span class="na">Companion</span><span class="o">.</span><span class="na">sendTrackingEvent</span><span class="o">(</span><span class="n">tracker</span><span class="o">);</span>
</code></pre>
<p>The <code>ABVisitTracker</code> lets you track any visit occurring on a mobile app.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Device_type</td>
<td>string</td>
<td>Device used by the visitor to view the test. The devices currently supported  are: <code>&quot;DESKTOP&quot;</code>, <code>&quot;MOBILE&quot;</code>, <code>&quot;TABLET&quot;</code>, <code>&quot;CAMERA&quot;</code>, <code>&quot;TV&quot;</code>, <code>&quot;GAMES_CONSOLE&quot;</code>, <code>&quot;PAYMENT_TERMINAL&quot;</code>, <code>&quot;WRISTWATCH&quot;</code>, and <code>&quot;OTHER&quot;</code>. <strong>required</strong></td>
</tr>
<tr>
<td>origin</td>
<td>string</td>
<td>Original page where the event occurred (can be a URI or a screen name). <strong>required</strong></td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Date and time when the event occurred, expressed using the <a href="https://en.wikipedia.org/wiki/ISO_8601#Date_et_heure">iso8601 standards</a>. <strong>optional</strong></td>
</tr>
<tr>
<td>ip</td>
<td>string</td>
<td>IP address of the visitor&#39;s device to determine the geolocation.</td>
</tr>
<tr>
<td>geolocation</td>
<td>object</td>
<td>optional</td>
</tr>
<tr>
<td>geolocation.lat</td>
<td>float</td>
<td>Latitude between 0 and 90. <strong>optional</strong></td>
</tr>
<tr>
<td>geolocation.long</td>
<td>float</td>
<td>Longitude between -180 and 180. <strong>optional</strong></td>
</tr>
</tbody></table>

<p><br></p>
<h1 id='reference'>Reference</h1>
<p><a href="http://sdk.abtasty.com/android/ref/abtastysdk/index.html">Reference</a></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="kotlin">kotlin</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
